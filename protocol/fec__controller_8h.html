<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Whist Protocol: whist/fec/fec_controller.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Whist Protocol
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fec__controller_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fec_controller.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Copyright (c) 2021-2022 Whist Technologies, Inc.  
<a href="#details">More...</a></p>

<p><a href="fec__controller_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8f70a4dc2a679b9cbe7d28942c639c98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#a8f70a4dc2a679b9cbe7d28942c639c98">ENABLE_FEC</a>&#160;&#160;&#160;false</td></tr>
<tr class="separator:a8f70a4dc2a679b9cbe7d28942c639c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a933a6ad650beb426f68568853575c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#ac3a933a6ad650beb426f68568853575c">INITIAL_FEC_RATIO</a>&#160;&#160;&#160;0.05</td></tr>
<tr class="separator:ac3a933a6ad650beb426f68568853575c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6f34be33e277e1dfd9d4fb4e92f456b9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#a6f34be33e277e1dfd9d4fb4e92f456b9">create_fec_controller</a> (double current_time)</td></tr>
<tr class="memdesc:a6f34be33e277e1dfd9d4fb4e92f456b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create FEC Controller.  <a href="fec__controller_8h.html#a6f34be33e277e1dfd9d4fb4e92f456b9">More...</a><br /></td></tr>
<tr class="separator:a6f34be33e277e1dfd9d4fb4e92f456b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffdceb861acf5ef9b0d67771f4277e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#a4ffdceb861acf5ef9b0d67771f4277e0">destroy_fec_controller</a> (void *fec_controller)</td></tr>
<tr class="memdesc:a4ffdceb861acf5ef9b0d67771f4277e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy FEC Controller.  <a href="fec__controller_8h.html#a4ffdceb861acf5ef9b0d67771f4277e0">More...</a><br /></td></tr>
<tr class="separator:a4ffdceb861acf5ef9b0d67771f4277e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ae4007dafbbdaa2e38860cda635d4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#a77ae4007dafbbdaa2e38860cda635d4a">fec_controller_feed_latency</a> (void *fec_controller, double current_time, double latency)</td></tr>
<tr class="memdesc:a77ae4007dafbbdaa2e38860cda635d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">feed latency info into the fec controller  <a href="fec__controller_8h.html#a77ae4007dafbbdaa2e38860cda635d4a">More...</a><br /></td></tr>
<tr class="separator:a77ae4007dafbbdaa2e38860cda635d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a105234da053bbccca57270d93fbabd90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#a105234da053bbccca57270d93fbabd90">fec_controller_feed_info</a> (void *fec_controller, double current_time, <a class="el" href="network__algorithm_8h.html#a39ef8d2688f24968d0744d9bb7cea4c7">WccOp</a> op, double packet_loss, int old_bitrate, int current_bitrate, int min_bitrate, bool saturate_bandwidth)</td></tr>
<tr class="memdesc:a105234da053bbccca57270d93fbabd90"><td class="mdescLeft">&#160;</td><td class="mdescRight">feed all other info into fec controller  <a href="fec__controller_8h.html#a105234da053bbccca57270d93fbabd90">More...</a><br /></td></tr>
<tr class="separator:a105234da053bbccca57270d93fbabd90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6cb224de7d700ded3341ccf8960b66f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fec__controller_8h.html#aa6cb224de7d700ded3341ccf8960b66f">fec_controller_get_total_fec_ratio</a> (void *fec_controller, double current_time, double old_value)</td></tr>
<tr class="memdesc:aa6cb224de7d700ded3341ccf8960b66f"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the fec ratio computed by fec_controller  <a href="fec__controller_8h.html#aa6cb224de7d700ded3341ccf8960b66f">More...</a><br /></td></tr>
<tr class="separator:aa6cb224de7d700ded3341ccf8960b66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Copyright (c) 2021-2022 Whist Technologies, Inc. </p>
<p>contains functions to feed info into fec controller, and get fec ratio from fec controller </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8f70a4dc2a679b9cbe7d28942c639c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f70a4dc2a679b9cbe7d28942c639c98">&#9670;&nbsp;</a></span>ENABLE_FEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENABLE_FEC&#160;&#160;&#160;false</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac3a933a6ad650beb426f68568853575c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a933a6ad650beb426f68568853575c">&#9670;&nbsp;</a></span>INITIAL_FEC_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INITIAL_FEC_RATIO&#160;&#160;&#160;0.05</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6f34be33e277e1dfd9d4fb4e92f456b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f34be33e277e1dfd9d4fb4e92f456b9">&#9670;&nbsp;</a></span>create_fec_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* create_fec_controller </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create FEC Controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_time</td><td>Comparable current_time in sec</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The created FEC controller </dd></dl>

</div>
</div>
<a id="a4ffdceb861acf5ef9b0d67771f4277e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ffdceb861acf5ef9b0d67771f4277e0">&#9670;&nbsp;</a></span>destroy_fec_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_fec_controller </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fec_controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy FEC Controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fec_controller</td><td>The FEC controller to destory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a105234da053bbccca57270d93fbabd90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a105234da053bbccca57270d93fbabd90">&#9670;&nbsp;</a></span>fec_controller_feed_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fec_controller_feed_info </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fec_controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="network__algorithm_8h.html#a39ef8d2688f24968d0744d9bb7cea4c7">WccOp</a>&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>packet_loss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>old_bitrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_bitrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_bitrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>saturate_bandwidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>feed all other info into fec controller </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fec_controller</td><td>The FEC controller </td></tr>
    <tr><td class="paramname">current_time</td><td>comparable current_time in sec </td></tr>
    <tr><td class="paramname">op</td><td>current operation in WCC </td></tr>
    <tr><td class="paramname">packet_loss</td><td>current packet loss </td></tr>
    <tr><td class="paramname">old_bitrate</td><td>old bitrate suggested by WCC </td></tr>
    <tr><td class="paramname">current_bitrate</td><td>current bitrate suggested by WCC </td></tr>
    <tr><td class="paramname">min_bitrate</td><td>the min bitrate for current resolution and dpi </td></tr>
    <tr><td class="paramname">saturate_bandwidth</td><td>saturate_bandwidth flag from WCC, only for debug </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77ae4007dafbbdaa2e38860cda635d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ae4007dafbbdaa2e38860cda635d4a">&#9670;&nbsp;</a></span>fec_controller_feed_latency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fec_controller_feed_latency </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fec_controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>latency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>feed latency info into the fec controller </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fec_controller</td><td>The FEC controller </td></tr>
    <tr><td class="paramname">current_time</td><td>comparable current_time in sec </td></tr>
    <tr><td class="paramname">latency</td><td>latency in sec</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>this is a dedicated function for latency feed, since latency is always avaliable while others are not </dd></dl>

</div>
</div>
<a id="aa6cb224de7d700ded3341ccf8960b66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6cb224de7d700ded3341ccf8960b66f">&#9670;&nbsp;</a></span>fec_controller_get_total_fec_ratio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double fec_controller_get_total_fec_ratio </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>fec_controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>old_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the fec ratio computed by fec_controller </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fec_controller</td><td>The FEC controller </td></tr>
    <tr><td class="paramname">current_time</td><td>comparable current_time in sec </td></tr>
    <tr><td class="paramname">old_value</td><td>old value of fec</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>total fec ratio</dd></dl>
<dl class="section note"><dt>Note</dt><dd>when old value is not -1, and new calculated value is close enough to the old value, the returned value might just be the old value. This is for avoiding uncessary parameter change sending over the internet. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2163314886daa89b67d58b0e72b2c23f.html">whist</a></li><li class="navelem"><a class="el" href="dir_0d0eceae74ecea1c5e407aa9238236db.html">fec</a></li><li class="navelem"><a class="el" href="fec__controller_8h.html">fec_controller.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
