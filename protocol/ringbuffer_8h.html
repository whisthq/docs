<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fractal Protocol: client/ringbuffer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fractal Protocol
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ringbuffer_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ringbuffer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the code to create a ring buffer and use it for handling received.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="fractal_8h_source.html">fractal/core/fractal.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="client_2network_8h_source.html">network.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="fractal__frame_8h_source.html">fractal/core/fractal_frame.h</a>&gt;</code><br />
</div>
<p><a href="ringbuffer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFrameData.html">FrameData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structFrameData.html" title="FrameData struct containing content and metadata of encoded frames.">FrameData</a> struct containing content and metadata of encoded frames.  <a href="structFrameData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRingBuffer.html">RingBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structRingBuffer.html" title="RingBuffer struct for abstracting away frame reconstruction and frame retrieval.">RingBuffer</a> struct for abstracting away frame reconstruction and frame retrieval.  <a href="structRingBuffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adf06ce5e31c557cd5e3342811904c911"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#adf06ce5e31c557cd5e3342811904c911">MAX_PACKET_NACKS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:adf06ce5e31c557cd5e3342811904c911"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2eca4a720a0435f1f5e9f4eae291fe90"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a2eca4a720a0435f1f5e9f4eae291fe90">FrameDataType</a></td></tr>
<tr class="memdesc:a2eca4a720a0435f1f5e9f4eae291fe90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio/video types for ring buffers and frames.  <a href="ringbuffer_8h.html#a2eca4a720a0435f1f5e9f4eae291fe90">More...</a><br /></td></tr>
<tr class="separator:a2eca4a720a0435f1f5e9f4eae291fe90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2763204414a22a08c1edb26446244d80"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structFrameData.html">FrameData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a2763204414a22a08c1edb26446244d80">FrameData</a></td></tr>
<tr class="memdesc:a2763204414a22a08c1edb26446244d80"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structFrameData.html" title="FrameData struct containing content and metadata of encoded frames.">FrameData</a> struct containing content and metadata of encoded frames.  <a href="ringbuffer_8h.html#a2763204414a22a08c1edb26446244d80">More...</a><br /></td></tr>
<tr class="separator:a2763204414a22a08c1edb26446244d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0132fb254601f025c3cf73363a3c90c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structRingBuffer.html">RingBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#ac0132fb254601f025c3cf73363a3c90c">RingBuffer</a></td></tr>
<tr class="memdesc:ac0132fb254601f025c3cf73363a3c90c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structRingBuffer.html" title="RingBuffer struct for abstracting away frame reconstruction and frame retrieval.">RingBuffer</a> struct for abstracting away frame reconstruction and frame retrieval.  <a href="ringbuffer_8h.html#ac0132fb254601f025c3cf73363a3c90c">More...</a><br /></td></tr>
<tr class="separator:ac0132fb254601f025c3cf73363a3c90c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3be5e6f81a17677db9e4aa98a541ba45"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a> { <a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45aa0ddc8dca3a9e11bf8cb2a97630c461c">FRAME_AUDIO</a>, 
<a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45a69a6e5462ec0d106fee538d79162bf70">FRAME_VIDEO</a>
 }</td></tr>
<tr class="memdesc:a3be5e6f81a17677db9e4aa98a541ba45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio/video types for ring buffers and frames.  <a href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">More...</a><br /></td></tr>
<tr class="separator:a3be5e6f81a17677db9e4aa98a541ba45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a672f453baf215cd27bb691b95db7c205"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a672f453baf215cd27bb691b95db7c205">init_ring_buffer</a> (<a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a> type, int ring_buffer_size)</td></tr>
<tr class="memdesc:a672f453baf215cd27bb691b95db7c205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a ring buffer of the specified size and type.  <a href="ringbuffer_8h.html#a672f453baf215cd27bb691b95db7c205">More...</a><br /></td></tr>
<tr class="separator:a672f453baf215cd27bb691b95db7c205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a35ea430111d5dadd29f8b9b9d99c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFrameData.html">FrameData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a69a35ea430111d5dadd29f8b9b9d99c5">get_frame_at_id</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, int id)</td></tr>
<tr class="memdesc:a69a35ea430111d5dadd29f8b9b9d99c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrives the frame at the given ID in the ring buffer.  <a href="ringbuffer_8h.html#a69a35ea430111d5dadd29f8b9b9d99c5">More...</a><br /></td></tr>
<tr class="separator:a69a35ea430111d5dadd29f8b9b9d99c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f7e1e295ea3891d8b9b342fab21db03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a2f7e1e295ea3891d8b9b342fab21db03">receive_packet</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, <a class="el" href="structFractalPacket.html">FractalPacket</a> *packet)</td></tr>
<tr class="memdesc:a2f7e1e295ea3891d8b9b342fab21db03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a packet to the ring buffer, and initialize the corresponding frame if necessary. Also nacks for missing packets or frames.  <a href="ringbuffer_8h.html#a2f7e1e295ea3891d8b9b342fab21db03">More...</a><br /></td></tr>
<tr class="separator:a2f7e1e295ea3891d8b9b342fab21db03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af514843307356fd516b1a96211c9d986"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#af514843307356fd516b1a96211c9d986">destroy_ring_buffer</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer)</td></tr>
<tr class="memdesc:af514843307356fd516b1a96211c9d986"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the ring buffer and all its constituent frames.  <a href="ringbuffer_8h.html#af514843307356fd516b1a96211c9d986">More...</a><br /></td></tr>
<tr class="separator:af514843307356fd516b1a96211c9d986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f7eee64b17022f222c26c71edc3078"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a36f7eee64b17022f222c26c71edc3078">nack_packet</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, int id, int index)</td></tr>
<tr class="memdesc:a36f7eee64b17022f222c26c71edc3078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a nack for the packet at index index of frame with ID id.  <a href="ringbuffer_8h.html#a36f7eee64b17022f222c26c71edc3078">More...</a><br /></td></tr>
<tr class="separator:a36f7eee64b17022f222c26c71edc3078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39f9574458820226981480a98a1081b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#ad39f9574458820226981480a98a1081b">nack_missing_packets_up_to_index</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, <a class="el" href="structFrameData.html">FrameData</a> *frame_data, int index)</td></tr>
<tr class="memdesc:ad39f9574458820226981480a98a1081b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nack 1 missing packet of frame_data up to index.  <a href="ringbuffer_8h.html#ad39f9574458820226981480a98a1081b">More...</a><br /></td></tr>
<tr class="separator:ad39f9574458820226981480a98a1081b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4415bb2d50c63ca97a0eafa97964188d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#a4415bb2d50c63ca97a0eafa97964188d">reset_frame</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, <a class="el" href="structFrameData.html">FrameData</a> *frame_data)</td></tr>
<tr class="memdesc:a4415bb2d50c63ca97a0eafa97964188d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the frame, both metadata and frame buffer.  <a href="ringbuffer_8h.html#a4415bb2d50c63ca97a0eafa97964188d">More...</a><br /></td></tr>
<tr class="separator:a4415bb2d50c63ca97a0eafa97964188d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc37000ecd47712d4a8cc8e83867a60d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ringbuffer_8h.html#adc37000ecd47712d4a8cc8e83867a60d">set_rendering</a> (<a class="el" href="structRingBuffer.html">RingBuffer</a> *ring_buffer, int id)</td></tr>
<tr class="memdesc:adc37000ecd47712d4a8cc8e83867a60d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate that the frame with ID id is currently rendering, and free the frame buffer for the previously rendered frame. The ring buffer will not write to the currently rendering frame.  <a href="ringbuffer_8h.html#adc37000ecd47712d4a8cc8e83867a60d">More...</a><br /></td></tr>
<tr class="separator:adc37000ecd47712d4a8cc8e83867a60d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the code to create a ring buffer and use it for handling received. </p>
<p>Copyright Fractal Computers, Inc. 2021</p>
<h1><a class="anchor" id="autotoc_md54"></a>
audio/video.</h1>
<h1><a class="anchor" id="autotoc_md55"></a>
Usage</h1>
<p>Initialize a ring buffer for audio or video using init_ring_buffer. When new packets arrive, call receive_packet to process the packet and modify or create ring buffer entries as needed. To nack a packet, call nack_packet. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="adf06ce5e31c557cd5e3342811904c911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf06ce5e31c557cd5e3342811904c911">&#9670;&nbsp;</a></span>MAX_PACKET_NACKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PACKET_NACKS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a2763204414a22a08c1edb26446244d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2763204414a22a08c1edb26446244d80">&#9670;&nbsp;</a></span>FrameData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structFrameData.html">FrameData</a> <a class="el" href="structFrameData.html">FrameData</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structFrameData.html" title="FrameData struct containing content and metadata of encoded frames.">FrameData</a> struct containing content and metadata of encoded frames. </p>
<p>This is used to handle reconstruction of encoded frames from UDP packets. It contains metadata to keep track of what packets we have received and nacked for, as well as a buffer for holding the concatenated UDP packets. </p>

</div>
</div>
<a id="a2eca4a720a0435f1f5e9f4eae291fe90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eca4a720a0435f1f5e9f4eae291fe90">&#9670;&nbsp;</a></span>FrameDataType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a> <a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio/video types for ring buffers and frames. </p>

</div>
</div>
<a id="ac0132fb254601f025c3cf73363a3c90c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0132fb254601f025c3cf73363a3c90c">&#9670;&nbsp;</a></span>RingBuffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structRingBuffer.html">RingBuffer</a> <a class="el" href="structRingBuffer.html">RingBuffer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structRingBuffer.html" title="RingBuffer struct for abstracting away frame reconstruction and frame retrieval.">RingBuffer</a> struct for abstracting away frame reconstruction and frame retrieval. </p>
<p>This is used by <a class="el" href="client_2audio_8c.html" title="This file contains all code that interacts directly with processing.">client/audio.c</a> and <a class="el" href="client_2video_8c.html" title="This file contains all code that interacts directly with receiving and.">client/video.c</a> to keep track of frames as the client receives packets. It handles inserting new packets into the ring buffer and nacking for missing packets. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3be5e6f81a17677db9e4aa98a541ba45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3be5e6f81a17677db9e4aa98a541ba45">&#9670;&nbsp;</a></span>FrameDataType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio/video types for ring buffers and frames. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3be5e6f81a17677db9e4aa98a541ba45aa0ddc8dca3a9e11bf8cb2a97630c461c"></a>FRAME_AUDIO&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3be5e6f81a17677db9e4aa98a541ba45a69a6e5462ec0d106fee538d79162bf70"></a>FRAME_VIDEO&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af514843307356fd516b1a96211c9d986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af514843307356fd516b1a96211c9d986">&#9670;&nbsp;</a></span>destroy_ring_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_ring_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the ring buffer and all its constituent frames. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer to destroy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a69a35ea430111d5dadd29f8b9b9d99c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a35ea430111d5dadd29f8b9b9d99c5">&#9670;&nbsp;</a></span>get_frame_at_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFrameData.html">FrameData</a>* get_frame_at_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrives the frame at the given ID in the ring buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer to access</td></tr>
    <tr><td class="paramname">id</td><td>ID of desired frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the <a class="el" href="structFrameData.html" title="FrameData struct containing content and metadata of encoded frames.">FrameData</a> at ID id in ring_buffer. </dd></dl>

</div>
</div>
<a id="a672f453baf215cd27bb691b95db7c205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a672f453baf215cd27bb691b95db7c205">&#9670;&nbsp;</a></span>init_ring_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structRingBuffer.html">RingBuffer</a>* init_ring_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ringbuffer_8h.html#a3be5e6f81a17677db9e4aa98a541ba45">FrameDataType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ring_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a ring buffer of the specified size and type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Either an audio or video ring buffer.</td></tr>
    <tr><td class="paramname">ring_buffer_size</td><td>The desired size of the ring buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the newly created ring buffer. All frames in the new ring buffer have ID -1. </dd></dl>

</div>
</div>
<a id="ad39f9574458820226981480a98a1081b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad39f9574458820226981480a98a1081b">&#9670;&nbsp;</a></span>nack_missing_packets_up_to_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nack_missing_packets_up_to_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFrameData.html">FrameData</a> *&#160;</td>
          <td class="paramname"><em>frame_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nack 1 missing packet of frame_data up to index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer containing the frame</td></tr>
    <tr><td class="paramname">frame_data</td><td>Frame that might be missing packets</td></tr>
    <tr><td class="paramname">index</td><td>Packet index to nack up to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a36f7eee64b17022f222c26c71edc3078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f7eee64b17022f222c26c71edc3078">&#9670;&nbsp;</a></span>nack_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nack_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a nack for the packet at index index of frame with ID id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer that should have the packet</td></tr>
    <tr><td class="paramname">id</td><td>ID of the frame that should have the packet</td></tr>
    <tr><td class="paramname">index</td><td>Packet index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f7e1e295ea3891d8b9b342fab21db03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f7e1e295ea3891d8b9b342fab21db03">&#9670;&nbsp;</a></span>receive_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int receive_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFractalPacket.html">FractalPacket</a> *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a packet to the ring buffer, and initialize the corresponding frame if necessary. Also nacks for missing packets or frames. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer to place packet into</td></tr>
    <tr><td class="paramname">packet</td><td>An audio or video UDP packet</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="a4415bb2d50c63ca97a0eafa97964188d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4415bb2d50c63ca97a0eafa97964188d">&#9670;&nbsp;</a></span>reset_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_frame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFrameData.html">FrameData</a> *&#160;</td>
          <td class="paramname"><em>frame_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the frame, both metadata and frame buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer containing the frame. </td></tr>
    <tr><td class="paramname">frame_data</td><td>Frame to "clear" from the ring buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc37000ecd47712d4a8cc8e83867a60d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc37000ecd47712d4a8cc8e83867a60d">&#9670;&nbsp;</a></span>set_rendering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_rendering </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRingBuffer.html">RingBuffer</a> *&#160;</td>
          <td class="paramname"><em>ring_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate that the frame with ID id is currently rendering, and free the frame buffer for the previously rendered frame. The ring buffer will not write to the currently rendering frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring_buffer</td><td>Ring buffer containing the frame</td></tr>
    <tr><td class="paramname">id</td><td>ID of the frame we are currently rendering. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_db3a54907829b36871118d03417739cd.html">client</a></li><li class="navelem"><a class="el" href="ringbuffer_8h.html">ringbuffer.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
