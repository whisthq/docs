<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>subscriptions - Whist Backend Services</title>

<link type="text/css" rel="stylesheet" href="https://docs.whist.com/backend/services//lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="https://docs.whist.com/backend/services//lib/godoc/jquery.js" defer></script>




<script>var goVersion = "go1.19.2";</script>
<script src="https://docs.whist.com/backend/services//lib/godoc/godocs.js" defer></script>

</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/">Whist Backend Services | Autogenerated from c104c46</a></div>
<div class="top-heading" id="heading-narrow"><a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/">Whist Backend Services</a></div>
<a href="#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package subscriptions
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/whisthq/whist/backend/services/subscriptions"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>Package subscriptions is responsible for implementing a pubsub architecture
on the Whist backend services. This is achieved using Hasura live subscriptions, so that
the host-service  and scaling-service can be notified instantly of any change in the database.

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
				<dd><a href="#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="#FrontendVersionHandler">func FrontendVersionHandler(event SubscriptionEvent, variables map[string]interface{}) bool</a></dd>
			
				
				<dd><a href="#InstanceStatusHandler">func InstanceStatusHandler(event SubscriptionEvent, variables map[string]interface{}) bool</a></dd>
			
				
				<dd><a href="#InstancesStatusHandler">func InstancesStatusHandler(event SubscriptionEvent, variables map[string]interface{}) bool</a></dd>
			
				
				<dd><a href="#MandelboxAllocatedHandler">func MandelboxAllocatedHandler(event SubscriptionEvent, variables map[string]interface{}) bool</a></dd>
			
				
				<dd><a href="#SetupConfigSubscriptions">func SetupConfigSubscriptions(whistClient WhistSubscriptionClient)</a></dd>
			
				
				<dd><a href="#SetupHostSubscriptions">func SetupHostSubscriptions(instanceID string, whistClient WhistSubscriptionClient)</a></dd>
			
				
				<dd><a href="#SetupScalingSubscriptions">func SetupScalingSubscriptions(whistClient WhistSubscriptionClient)</a></dd>
			
				
				<dd><a href="#Start">func Start(whistClient WhistSubscriptionClient, globalCtx context.Context, goroutineTracker *sync.WaitGroup, subscriptionEvents chan SubscriptionEvent, useConfigDB bool) error</a></dd>
			
				
				<dd><a href="#WhistWebsocketConn">func WhistWebsocketConn(sc *graphql.SubscriptionClient) (graphql.WebsocketConn, error)</a></dd>
			
			
				
				<dd><a href="#FrontendVersion">type FrontendVersion</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#ToFrontendVersion">func ToFrontendVersion(dbVersion WhistFrontendVersion) FrontendVersion</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#FrontendVersion.String">func (fv FrontendVersion) String() string</a></dd>
				
			
				
				<dd><a href="#FrontendVersionEvent">type FrontendVersionEvent</a></dd>
				
				
			
				
				<dd><a href="#GraphQLClient">type GraphQLClient</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#GraphQLClient.GetParams">func (wc *GraphQLClient) GetParams() HasuraParams</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#GraphQLClient.Initialize">func (wc *GraphQLClient) Initialize(useConfigDB bool) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#GraphQLClient.Mutate">func (wc *GraphQLClient) Mutate(ctx context.Context, query GraphQLQuery, variables map[string]interface{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#GraphQLClient.Query">func (wc *GraphQLClient) Query(ctx context.Context, query GraphQLQuery, variables map[string]interface{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#GraphQLClient.SetParams">func (wc *GraphQLClient) SetParams(params HasuraParams)</a></dd>
				
			
				
				<dd><a href="#GraphQLQuery">type GraphQLQuery</a></dd>
				
				
			
				
				<dd><a href="#Handlerfn">type Handlerfn</a></dd>
				
				
			
				
				<dd><a href="#HasuraParams">type HasuraParams</a></dd>
				
				
			
				
				<dd><a href="#HasuraSubscription">type HasuraSubscription</a></dd>
				
				
			
				
				<dd><a href="#Image">type Image</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#ToImages">func ToImages(dbImages []WhistImage) []Image</a></dd>
				
				
			
				
				<dd><a href="#ImageEvent">type ImageEvent</a></dd>
				
				
			
				
				<dd><a href="#Instance">type Instance</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#ToInstances">func ToInstances(dbInstances []WhistInstance) []Instance</a></dd>
				
				
			
				
				<dd><a href="#InstanceEvent">type InstanceEvent</a></dd>
				
				
			
				
				<dd><a href="#Mandelbox">type Mandelbox</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#ToMandelboxes">func ToMandelboxes(dbMandelboxes []WhistMandelbox) []Mandelbox</a></dd>
				
				
			
				
				<dd><a href="#MandelboxEvent">type MandelboxEvent</a></dd>
				
				
			
				
				<dd><a href="#SubscriptionClient">type SubscriptionClient</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.Close">func (wc *SubscriptionClient) Close() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.GetParams">func (wc *SubscriptionClient) GetParams() HasuraParams</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.GetSubscriptionIDs">func (wc *SubscriptionClient) GetSubscriptionIDs() []string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.GetSubscriptions">func (wc *SubscriptionClient) GetSubscriptions() []HasuraSubscription</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.Initialize">func (wc *SubscriptionClient) Initialize(useConfigDB bool) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.Run">func (wc *SubscriptionClient) Run(goroutineTracker *sync.WaitGroup)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.SetParams">func (wc *SubscriptionClient) SetParams(params HasuraParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.SetSubscriptions">func (wc *SubscriptionClient) SetSubscriptions(subscriptions []HasuraSubscription)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.SetSubscriptionsIDs">func (wc *SubscriptionClient) SetSubscriptionsIDs(ids []string)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#SubscriptionClient.Subscribe">func (wc *SubscriptionClient) Subscribe(query GraphQLQuery, variables map[string]interface{}, result SubscriptionEvent, conditionFn Handlerfn, subscriptionEvents chan SubscriptionEvent) (id string, err error)</a></dd>
				
			
				
				<dd><a href="#SubscriptionEvent">type SubscriptionEvent</a></dd>
				
				
			
				
				<dd><a href="#WhistConfigs">type WhistConfigs</a></dd>
				
				
			
				
				<dd><a href="#WhistFrontendVersion">type WhistFrontendVersion</a></dd>
				
				
			
				
				<dd><a href="#WhistGraphQLClient">type WhistGraphQLClient</a></dd>
				
				
			
				
				<dd><a href="#WhistImage">type WhistImage</a></dd>
				
				
			
				
				<dd><a href="#WhistInstance">type WhistInstance</a></dd>
				
				
			
				
				<dd><a href="#WhistMandelbox">type WhistMandelbox</a></dd>
				
				
			
				
				<dd><a href="#WhistSubscriptionClient">type WhistSubscriptionClient</a></dd>
				
				
			
				
				<dd><a href="#WhistWebsocketHandler">type WhistWebsocketHandler</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#WhistWebsocketHandler.Close">func (wh *WhistWebsocketHandler) Close() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#WhistWebsocketHandler.ReadJSON">func (wh *WhistWebsocketHandler) ReadJSON(v interface{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#WhistWebsocketHandler.WriteJSON">func (wh *WhistWebsocketHandler) WriteJSON(v interface{}) error</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/connection.go">connection.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go">graphql_client.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/mutations.go">mutations.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/queries.go">queries.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/setup_tests.go">setup_tests.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go">subscription_client.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go">subscriptions.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go">types.go</a>
			
				<a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go">websocket.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
			<h2 id="pkg-variables">Variables</h2>
			
				
				<pre>var (

    <span class="comment">// InsertInstances inserts multiple instances to the database.</span>
    <span id="InsertInstances">InsertInstances</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;insert_whist_instances(objects: $objects)&#34;`
    }

    <span class="comment">// UpdateInstance updates the fields of an instance.</span>
    <span id="UpdateInstance">UpdateInstance</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;update_whist_instances(where: {id: {_eq: $id}}, _set: $changes)&#34;`
    }

    <span class="comment">// DeleteInstanceStatusById deletes an instance with the given id and its mandelboxes from the database.</span>
    <span id="DeleteInstanceById">DeleteInstanceById</span> struct {
        MandelboxesMutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;delete_whist_mandelboxes(where: {instance_id: {_eq: $id}})&#34;`
        InstancesMutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;delete_whist_instances(where: {id: {_eq: $id}})&#34;`
    }

    <span class="comment">// InsertInstances inserts multiple instances to the database.</span>
    <span id="InsertMandelboxes">InsertMandelboxes</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;insert_whist_mandelboxes(objects: $objects)&#34;`
    }

    <span class="comment">// UpdateMandelbox updates the row of a mandelbox on the database.</span>
    <span id="UpdateMandelbox">UpdateMandelbox</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;update_whist_mandelboxes(where: {id: {_eq: $id}}, _set: $changes)&#34;`
    }

    <span class="comment">// InsertImages inserts multiple images to the database.</span>
    <span id="InsertImages">InsertImages</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;insert_whist_images(objects: $objects)&#34;`
    }

    <span class="comment">// UpdateImage updates the row of an image to the given values.</span>
    <span id="UpdateImage">UpdateImage</span> struct {
        MutationResponse struct {
            AffectedRows graphql.<a href="#Int">Int</a> `graphql:&#34;affected_rows&#34;`
        } `graphql:&#34;update_whist_images(where: {region: {_eq: $region}, _and: {provider: {_eq: $provider}}}, _set: {client_sha: $client_sha, image_id: $image_id, provider: $provider, region: $region, updated_at: $updated_at})&#34;`
    }
)</pre>
			
				
				<pre>var (

    <span class="comment">// QueryInstanceByIdWithStatus returns an instance that matches the given instance_name and status.</span>
    <span id="QueryInstanceByIdWithStatus">QueryInstanceByIdWithStatus</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {id: {_eq: $id}, _and: {status: {_eq: $status}}})&#34;`
    }

    <span class="comment">// QueryInstanceById returns an instance that matches the given instance_name and status.</span>
    <span id="QueryInstanceById">QueryInstanceById</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {id: {_eq: $id}})&#34;`
    }

    <span class="comment">// QueryInstanceStatus returns any instance that matches the given status.</span>
    <span id="QueryInstancesByStatus">QueryInstancesByStatus</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {status: {_eq: $status}})&#34;`
    }

    <span class="comment">// QueryInstanceWithCapacity returns an instance that has free space to run a mandelbox.</span>
    <span class="comment">// Return results ordered by capacity, so we efficiently allocate mandelboxes.</span>
    <span id="QueryInstanceWithCapacity">QueryInstanceWithCapacity</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {region: {_eq: $region}, _and: {status: {_eq: $status}, _and: {remaining_capacity: {_gt: 0}}}}, order_by: {remaining_capacity: asc})&#34;`
    }

    <span class="comment">// QueryInstancesByImageID returns any instance with the given image id.</span>
    <span id="QueryInstancesByImageID">QueryInstancesByImageID</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {image_id: {_eq: $image_id}})&#34;`
    }

    <span class="comment">// QueryInstancesByStatusOnRegion returns any instance that matches the given status and</span>
    <span class="comment">// is located on the given region.</span>
    <span id="QueryInstancesByStatusOnRegion">QueryInstancesByStatusOnRegion</span> struct {
        WhistInstances []<a href="#WhistInstance">WhistInstance</a> `graphql:&#34;whist_instances(where: {status: {_eq: $status} _and: {region: {_eq: $region}}})&#34;`
    }

    <span class="comment">// QueryMandelboxesById returns a mandelbox associated with the given instance</span>
    <span class="comment">// and that has the given status.</span>
    <span id="QueryMandelboxesByInstanceId">QueryMandelboxesByInstanceId</span> struct {
        WhistMandelboxes []<a href="#WhistMandelbox">WhistMandelbox</a> `graphql:&#34;whist_mandelboxes(where: {instance_id: {_eq: $instance_id}, _and: {status: {_eq: $status}}})&#34;`
    }

    <span class="comment">// QueryMandelboxesById returns a mandelbox associated with the given instance</span>
    <span class="comment">// and that has the given status.</span>
    <span id="QueryMandelboxesByUserId">QueryMandelboxesByUserId</span> struct {
        WhistMandelboxes []<a href="#WhistMandelbox">WhistMandelbox</a> `graphql:&#34;whist_mandelboxes(where: {user_id: {_eq: $user_id}})&#34;`
    }

    <span class="comment">// QueryLatestImage returns the latest image from the database for the specified provider/region pair.</span>
    <span id="QueryLatestImage">QueryLatestImage</span> struct {
        WhistImages []<a href="#WhistImage">WhistImage</a> `graphql:&#34;whist_images(where: {provider: {_eq: $provider}, _and: {region: {_eq: $region}}}, order_by: {updated_at: desc})&#34;`
    }

    <span class="comment">// QueryFrontendVersion returns the latest value on the `desktop_app_version` config database table.</span>
    <span id="QueryFrontendVersion">QueryFrontendVersion</span> struct {
        WhistFrontendVersions []<a href="#WhistFrontendVersion">WhistFrontendVersion</a> `graphql:&#34;desktop_app_version(where: {id: {_eq: $id}})&#34;`
    }

    <span class="comment">// QueryDevConfigurations will return all values in the `dev` table of the config database.</span>
    <span id="QueryDevConfigurations">QueryDevConfigurations</span> struct {
        <a href="#WhistConfigs">WhistConfigs</a> `graphql:&#34;dev&#34;`
    }

    <span class="comment">// QueryStagingConfigurations will return all values in the `staging` table of the config database.</span>
    <span id="QueryStagingConfigurations">QueryStagingConfigurations</span> struct {
        <a href="#WhistConfigs">WhistConfigs</a> `graphql:&#34;staging&#34;`
    }

    <span class="comment">// QueryProdConfigurations will return all values in the `prod` table of the config database.</span>
    <span id="QueryProdConfigurations">QueryProdConfigurations</span> struct {
        <a href="#WhistConfigs">WhistConfigs</a> `graphql:&#34;prod&#34;`
    }
)</pre>
			
				<p>`Enabled` is a flag denoting whether the functions in this package should do
anything, or simply be no-ops. This is necessary, since we want the subscription
operations to be meaningful in environments where we can expect the database
guarantees to hold (e.g. `metadata.EnvLocalDevWithDB` or `metadata.EnvDev`)
but no-ops in other environments.

				<pre>var <span id="Enabled">Enabled</span> = (<a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/metadata/">metadata</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/metadata/#GetAppEnvironment">GetAppEnvironment</a>() != <a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/metadata/">metadata</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/metadata/#EnvLocalDev">EnvLocalDev</a>)</pre>
			
		
		
			
			
			<h2 id="FrontendVersionHandler">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L77">FrontendVersionHandler</a>
				<a class="permalink" href="#FrontendVersionHandler">&#xb6;</a>
				
				
			</h2>
			<pre>func FrontendVersionHandler(event <a href="#SubscriptionEvent">SubscriptionEvent</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a></pre>
			<p>FrontendVersionHandler handles events from the hasura subscription which
detects changes to the config database frontend version.

			
			

		
			
			
			<h2 id="InstanceStatusHandler">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L19">InstanceStatusHandler</a>
				<a class="permalink" href="#InstanceStatusHandler">&#xb6;</a>
				
				
			</h2>
			<pre>func InstanceStatusHandler(event <a href="#SubscriptionEvent">SubscriptionEvent</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a></pre>
			<p>InstanceStatusHandler handles events from the Hasura subscription which
detects changes on instance instanceName to the given status in the database.

			
			

		
			
			
			<h2 id="InstancesStatusHandler">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L38">InstancesStatusHandler</a>
				<a class="permalink" href="#InstancesStatusHandler">&#xb6;</a>
				
				
			</h2>
			<pre>func InstancesStatusHandler(event <a href="#SubscriptionEvent">SubscriptionEvent</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a></pre>
			<p>InstancesStatusHandler handles events from the Hasura subscription which
detects changes on all instances to the given status in the database.

			
			

		
			
			
			<h2 id="MandelboxAllocatedHandler">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L57">MandelboxAllocatedHandler</a>
				<a class="permalink" href="#MandelboxAllocatedHandler">&#xb6;</a>
				
				
			</h2>
			<pre>func MandelboxAllocatedHandler(event <a href="#SubscriptionEvent">SubscriptionEvent</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a></pre>
			<p>MandelboxAllocatedHandler handles events from the Hasura subscription which
detects changes on instance instanceName to the given status in the database.

			
			

		
			
			
			<h2 id="SetupConfigSubscriptions">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L151">SetupConfigSubscriptions</a>
				<a class="permalink" href="#SetupConfigSubscriptions">&#xb6;</a>
				
				
			</h2>
			<pre>func SetupConfigSubscriptions(whistClient <a href="#WhistSubscriptionClient">WhistSubscriptionClient</a>)</pre>
			<p>SetupConfigSubscriptions creates a slice of HasuraSubscriptions to start the client. This
function is specific for the subscriptions used for the config database.

			
			

		
			
			
			<h2 id="SetupHostSubscriptions">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L110">SetupHostSubscriptions</a>
				<a class="permalink" href="#SetupHostSubscriptions">&#xb6;</a>
				
				
			</h2>
			<pre>func SetupHostSubscriptions(instanceID <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>, whistClient <a href="#WhistSubscriptionClient">WhistSubscriptionClient</a>)</pre>
			<p>SetupHostSubscriptions creates a slice of HasuraSubscriptions to start the client. This
function is specific for the subscriptions used on the host-service.

			
			

		
			
			
			<h2 id="SetupScalingSubscriptions">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L135">SetupScalingSubscriptions</a>
				<a class="permalink" href="#SetupScalingSubscriptions">&#xb6;</a>
				
				
			</h2>
			<pre>func SetupScalingSubscriptions(whistClient <a href="#WhistSubscriptionClient">WhistSubscriptionClient</a>)</pre>
			<p>SetupScalingSubscriptions creates a slice of HasuraSubscriptions to start the client. This
function is specific for the subscriptions used on the scaling-service.

			
			

		
			
			
			<h2 id="Start">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscriptions.go#L174">Start</a>
				<a class="permalink" href="#Start">&#xb6;</a>
				
				
			</h2>
			<pre>func Start(whistClient <a href="#WhistSubscriptionClient">WhistSubscriptionClient</a>, globalCtx <a href="https:/docs.whist.com/backend/services/pkg/context/">context</a>.<a href="https:/docs.whist.com/backend/services/pkg/context/#Context">Context</a>, goroutineTracker *<a href="https:/docs.whist.com/backend/services/pkg/sync/">sync</a>.<a href="https:/docs.whist.com/backend/services/pkg/sync/#WaitGroup">WaitGroup</a>, subscriptionEvents chan <a href="#SubscriptionEvent">SubscriptionEvent</a>, useConfigDB <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a>) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
			<p>Start is the main function in the subscriptions package. It initializes a client, sets up the received subscriptions,
and starts a goroutine for the client. It also has a goroutine to close the client and subscriptions when the global
context gets cancelled. It&apos;s possible to subscribe to the config database instead of the dev/staging/prod database by
setting the `useConfigDatabase` argument.

			
			

		
			
			
			<h2 id="WhistWebsocketConn">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go#L39">WhistWebsocketConn</a>
				<a class="permalink" href="#WhistWebsocketConn">&#xb6;</a>
				
				
			</h2>
			<pre>func WhistWebsocketConn(sc *<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#SubscriptionClient">SubscriptionClient</a>) (<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#WebsocketConn">WebsocketConn</a>, <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>)</pre>
			<p>WhistWebsocketConn creates a websocket handler and passes it to the GraphQL
subscription client.

			
			

		
		
			
			
			<h2 id="FrontendVersion">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L144">FrontendVersion</a>
				<a class="permalink" href="#FrontendVersion">&#xb6;</a>
				
				
			</h2>
			<p>FrontendVersion is a custom type to represent the frontend version. This type is
meant to be used across the codebase for any operation that does not interact with
the GraphQL client. For operations that interact with it, use the `WhistClientAppVersions` type.

			<pre>type FrontendVersion struct {
<span id="FrontendVersion.ID"></span>    ID                <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;id&#34;`
<span id="FrontendVersion.Major"></span>    Major             <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;major&#34;`
<span id="FrontendVersion.Minor"></span>    Minor             <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;minor&#34;`
<span id="FrontendVersion.Micro"></span>    Micro             <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;micro&#34;`
<span id="FrontendVersion.DevRC"></span>    DevRC             <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;dev_rc&#34;`
<span id="FrontendVersion.StagingRC"></span>    StagingRC         <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>    `json:&#34;staging_rc&#34;`
<span id="FrontendVersion.DevCommitHash"></span>    DevCommitHash     <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a> `json:&#34;dev_commit_hash&#34;`
<span id="FrontendVersion.StagingCommitHash"></span>    StagingCommitHash <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a> `json:&#34;staging_commit_hash&#34;`
<span id="FrontendVersion.ProdCommitHash"></span>    ProdCommitHash    <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a> `json:&#34;prod_commit_hash&#34;`
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ToFrontendVersion">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L269">ToFrontendVersion</a>
					<a class="permalink" href="#ToFrontendVersion">&#xb6;</a>
					
					
				</h3>
				<pre>func ToFrontendVersion(dbVersion <a href="#WhistFrontendVersion">WhistFrontendVersion</a>) <a href="#FrontendVersion">FrontendVersion</a></pre>
				<p>ToFrontendVersion converts a result obtained from GraphQL of type `WhistFrontendVersion`
to a type `FrontendVersion` for convenience.

				
				
			

			
				
				<h3 id="FrontendVersion.String">func (FrontendVersion) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L284">String</a>
					<a class="permalink" href="#FrontendVersion.String">&#xb6;</a>
					
					
				</h3>
				<pre>func (fv <a href="#FrontendVersion">FrontendVersion</a>) String() <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a></pre>
				<p>Make the FrontendVersion type implement the Stringer interface

				
				
				
			
		
			
			
			<h2 id="FrontendVersionEvent">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L201">FrontendVersionEvent</a>
				<a class="permalink" href="#FrontendVersionEvent">&#xb6;</a>
				
				
			</h2>
			<p>FrontendVersionEvent represents an occurred event on the
`dekstop_app_version` config database table. This struct is
meant to be used by any event that operates on the
desktop_app_version database table.

			<pre>type FrontendVersionEvent struct {
<span id="FrontendVersionEvent.FrontendVersions"></span>    FrontendVersions []<a href="#FrontendVersion">FrontendVersion</a> `json:&#34;desktop_app_version&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="GraphQLClient">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L23">GraphQLClient</a>
				<a class="permalink" href="#GraphQLClient">&#xb6;</a>
				
				
			</h2>
			<p>GraphQLClient implements WhistGraphQLClient and is exposed to be used
by any other service that need to interact with the Hasura client.

			<pre>type GraphQLClient struct {
<span id="GraphQLClient.Hasura"></span>    Hasura *<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Client">Client</a>
<span id="GraphQLClient.Params"></span>    Params <a href="#HasuraParams">HasuraParams</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="GraphQLClient.GetParams">func (*GraphQLClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L83">GetParams</a>
					<a class="permalink" href="#GraphQLClient.GetParams">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#GraphQLClient">GraphQLClient</a>) GetParams() <a href="#HasuraParams">HasuraParams</a></pre>
				
				
				
				
			
				
				<h3 id="GraphQLClient.Initialize">func (*GraphQLClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L44">Initialize</a>
					<a class="permalink" href="#GraphQLClient.Initialize">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#GraphQLClient">GraphQLClient</a>) Initialize(useConfigDB <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a>) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Initialize creates the client. This function is responsible from fetching the server
information from Heroku.

				
				
				
			
				
				<h3 id="GraphQLClient.Mutate">func (*GraphQLClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L101">Mutate</a>
					<a class="permalink" href="#GraphQLClient.Mutate">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#GraphQLClient">GraphQLClient</a>) Mutate(ctx <a href="https:/docs.whist.com/backend/services/pkg/context/">context</a>.<a href="https:/docs.whist.com/backend/services/pkg/context/#Context">Context</a>, query <a href="#GraphQLQuery">GraphQLQuery</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Mutate executes the given GraphQL mutation and writes to the database.

				
				
				
			
				
				<h3 id="GraphQLClient.Query">func (*GraphQLClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L93">Query</a>
					<a class="permalink" href="#GraphQLClient.Query">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#GraphQLClient">GraphQLClient</a>) Query(ctx <a href="https:/docs.whist.com/backend/services/pkg/context/">context</a>.<a href="https:/docs.whist.com/backend/services/pkg/context/#Context">Context</a>, query <a href="#GraphQLQuery">GraphQLQuery</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Query executes the given GraphQL query and assigns the returned values to
the provided interface.

				
				
				
			
				
				<h3 id="GraphQLClient.SetParams">func (*GraphQLClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L87">SetParams</a>
					<a class="permalink" href="#GraphQLClient.SetParams">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#GraphQLClient">GraphQLClient</a>) SetParams(params <a href="#HasuraParams">HasuraParams</a>)</pre>
				
				
				
				
			
		
			
			
			<h2 id="GraphQLQuery">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L17">GraphQLQuery</a>
				<a class="permalink" href="#GraphQLQuery">&#xb6;</a>
				
				
			</h2>
			<p>GraphQLQuery is a custom empty interface to represent the graphql queries described in the
`queries.go` file. An advantage is that these queries can be used both as subscriptions and normal queries.

			<pre>type GraphQLQuery interface{}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Handlerfn">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L157">Handlerfn</a>
				<a class="permalink" href="#Handlerfn">&#xb6;</a>
				
				
			</h2>
			<p>Handlerfn is used to send subscription handlers to the Subscribe function.

			<pre>type Handlerfn func(<a href="#SubscriptionEvent">SubscriptionEvent</a>, map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a></pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="HasuraParams">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L88">HasuraParams</a>
				<a class="permalink" href="#HasuraParams">&#xb6;</a>
				
				
			</h2>
			<p>HasuraParams contains the Heroku URL and Admin AccessKey to pass
to the client during initialization.

			<pre>type HasuraParams struct {
<span id="HasuraParams.URL"></span>    URL       <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>
<span id="HasuraParams.AccessKey"></span>    AccessKey <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="HasuraSubscription">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L161">HasuraSubscription</a>
				<a class="permalink" href="#HasuraSubscription">&#xb6;</a>
				
				
			</h2>
			<p>HasuraSubscription holds the graphql query and parameters to start the subscription.
It represents a generic subscription.

			<pre>type HasuraSubscription struct {
<span id="HasuraSubscription.Query"></span>    Query     <a href="#GraphQLQuery">GraphQLQuery</a>
<span id="HasuraSubscription.Variables"></span>    Variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}
<span id="HasuraSubscription.Result"></span>    Result    <a href="#SubscriptionEvent">SubscriptionEvent</a>
<span id="HasuraSubscription.Handler"></span>    Handler   <a href="#Handlerfn">Handlerfn</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Image">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L133">Image</a>
				<a class="permalink" href="#Image">&#xb6;</a>
				
				
			</h2>
			<p>Image is a custom type to represent an image. We use the cloud provider
agnostic term `image` that refers to a machine image used to launch instances.
This type is meant to be used across the codebase for any operation that does
not interact with the GraphQL client. For operations that interact
with it, use the `WhistImages` type.

			<pre>type Image struct {
<span id="Image.Provider"></span>    Provider  <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;provider&#34;`   <span class="comment">// Cloud provider where this image is registered</span>
<span id="Image.Region"></span>    Region    <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;region&#34;`     <span class="comment">// Region where the image is registered</span>
<span id="Image.ImageID"></span>    ImageID   <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;image_id&#34;`   <span class="comment">// ID of the image</span>
<span id="Image.ClientSHA"></span>    ClientSHA <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;client_sha&#34;` <span class="comment">// Commit hash the image belongs to</span>
<span id="Image.UpdatedAt"></span>    UpdatedAt <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a> `json:&#34;updated_at&#34;` <span class="comment">// Timestamp when the image was registered</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ToImages">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L252">ToImages</a>
					<a class="permalink" href="#ToImages">&#xb6;</a>
					
					
				</h3>
				<pre>func ToImages(dbImages []<a href="#WhistImage">WhistImage</a>) []<a href="#Image">Image</a></pre>
				<p>ToImages converts a result obtained from GraphQL of type `WhistImage`
to a slice of type `Image` for convenience.

				
				
			

			
		
			
			
			<h2 id="ImageEvent">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L193">ImageEvent</a>
				<a class="permalink" href="#ImageEvent">&#xb6;</a>
				
				
			</h2>
			<p>ImageEvent represents an occurred event on the
`whist.image` database table. This struct is
meant to be used by any event that operates on the
whist_images database table.

			<pre>type ImageEvent struct {
<span id="ImageEvent.Images"></span>    Images []<a href="#Image">Image</a> `json:&#34;whist_images&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Instance">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L99">Instance</a>
				<a class="permalink" href="#Instance">&#xb6;</a>
				
				
			</h2>
			<p>Instance is a custom type to represent an instance. This type is
meant to be used across the codebase for any operation that does
not interact with the GraphQL client. For operations that interact
with it, use the `WhistInstances` type instead.

			<pre>type Instance struct {
<span id="Instance.ID"></span>    ID                <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;id&#34;`                 <span class="comment">// ID of the instance</span>
<span id="Instance.Provider"></span>    Provider          <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;provider&#34;`           <span class="comment">// Cloud provider this instance is running on</span>
<span id="Instance.Region"></span>    Region            <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;region&#34;`             <span class="comment">// Region this instance is running on</span>
<span id="Instance.ImageID"></span>    ImageID           <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;image_id&#34;`           <span class="comment">// ID of the machine image used to launch this instance</span>
<span id="Instance.ClientSHA"></span>    ClientSHA         <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;client_sha&#34;`         <span class="comment">// Commit hash</span>
<span id="Instance.IPAddress"></span>    IPAddress         <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;ip_addr&#34;`            <span class="comment">// Public IPv4 address</span>
<span id="Instance.Type"></span>    Type              <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;instance_type&#34;`      <span class="comment">// Instance type</span>
<span id="Instance.RemainingCapacity"></span>    RemainingCapacity <a href="https:/docs.whist.com/backend/services/pkg/builtin/#int">int</a>       `json:&#34;remaining_capacity&#34;` <span class="comment">// Number of mandelboxes that can be allocated</span>
<span id="Instance.Status"></span>    Status            <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>    `json:&#34;status&#34;`             <span class="comment">// Current status of the instance</span>
<span id="Instance.CreatedAt"></span>    CreatedAt         <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a> `json:&#34;created_at&#34;`         <span class="comment">// Timestamp when the instance was creates</span>
<span id="Instance.UpdatedAt"></span>    UpdatedAt         <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a> `json:&#34;updated_at&#34;`         <span class="comment">// Timestamp when the instance was last updated</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ToInstances">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L209">ToInstances</a>
					<a class="permalink" href="#ToInstances">&#xb6;</a>
					
					
				</h3>
				<pre>func ToInstances(dbInstances []<a href="#WhistInstance">WhistInstance</a>) []<a href="#Instance">Instance</a></pre>
				<p>ToInstances converts a result obtained from GraphQL of type `WhistInstance`
to a slice of type `Instance` for convenience.

				
				
			

			
		
			
			
			<h2 id="InstanceEvent">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L177">InstanceEvent</a>
				<a class="permalink" href="#InstanceEvent">&#xb6;</a>
				
				
			</h2>
			<p>InstanceEvent represents an occurred event on the
`whist.hosts` database table. This struct is
meant to be used by any event that operates on the
instance_info database table.

			<pre>type InstanceEvent struct {
<span id="InstanceEvent.Instances"></span>    Instances []<a href="#Instance">Instance</a> `json:&#34;whist_instances&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Mandelbox">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L117">Mandelbox</a>
				<a class="permalink" href="#Mandelbox">&#xb6;</a>
				
				
			</h2>
			<p>Mandelbox is a custom type to represent a mandelbox. This type is
meant to be used across the codebase for any operation that does
not interact with the GraphQL client. For operations that interact
with it, use the `WhistMandelboxes` type.

			<pre>type Mandelbox struct {
<span id="Mandelbox.ID"></span>    ID         <a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/types/">types</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/types/#MandelboxID">MandelboxID</a> `json:&#34;id&#34;`          <span class="comment">// UUID of the mandelbox</span>
<span id="Mandelbox.App"></span>    App        <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>            `json:&#34;app&#34;`         <span class="comment">// App running on the mandelbox</span>
<span id="Mandelbox.InstanceID"></span>    InstanceID <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>            `json:&#34;instance_id&#34;` <span class="comment">// ID of the instance in which this mandelbox is running</span>
<span id="Mandelbox.UserID"></span>    UserID     <a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/types/">types</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/whisthq/whist/backend/services/types/#UserID">UserID</a>      `json:&#34;user_id&#34;`     <span class="comment">// ID of the user to which the mandelbox is assigned</span>
<span id="Mandelbox.SessionID"></span>    SessionID  <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>            `json:&#34;session_id&#34;`  <span class="comment">// ID of the session which is assigned to the mandelbox</span>
<span id="Mandelbox.Status"></span>    Status     <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>            `json:&#34;status&#34;`      <span class="comment">// Current status of the mandelbox</span>
<span id="Mandelbox.CreatedAt"></span>    CreatedAt  <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>         `json:&#34;created_at&#34;`  <span class="comment">// Timestamp when the mandelbox was created</span>
<span id="Mandelbox.UpdatedAt"></span>    UpdatedAt  <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>         `json:&#34;updated_at&#34;`  <span class="comment">// Timestamp when the mandelbox was last updated</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ToMandelboxes">func <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L232">ToMandelboxes</a>
					<a class="permalink" href="#ToMandelboxes">&#xb6;</a>
					
					
				</h3>
				<pre>func ToMandelboxes(dbMandelboxes []<a href="#WhistMandelbox">WhistMandelbox</a>) []<a href="#Mandelbox">Mandelbox</a></pre>
				<p>ToInstances converts a result obtained from GraphQL of type `WhistMandelbox`
to a slice of type `Mandelbox` for convenience.

				
				
			

			
		
			
			
			<h2 id="MandelboxEvent">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L185">MandelboxEvent</a>
				<a class="permalink" href="#MandelboxEvent">&#xb6;</a>
				
				
			</h2>
			<p>MandelboxEvent represents an occurred event on the
`whist.mandelbox` database table. This struct is
meant to be used by any event that operates on the
whist_mandelbox database table.

			<pre>type MandelboxEvent struct {
<span id="MandelboxEvent.Mandelboxes"></span>    Mandelboxes []<a href="#Mandelbox">Mandelbox</a> `json:&#34;whist_mandelboxes&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="SubscriptionClient">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L40">SubscriptionClient</a>
				<a class="permalink" href="#SubscriptionClient">&#xb6;</a>
				
				
			</h2>
			<p>SubscriptionClient implements WhistSubscriptionClient and is exposed to be used
by any other service that need to interact with the Hasura client.

			<pre>type SubscriptionClient struct {
<span id="SubscriptionClient.Hasura"></span>    Hasura          *<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#SubscriptionClient">SubscriptionClient</a>
<span id="SubscriptionClient.Params"></span>    Params          <a href="#HasuraParams">HasuraParams</a>
<span id="SubscriptionClient.Subscriptions"></span>    Subscriptions   []<a href="#HasuraSubscription">HasuraSubscription</a>
<span id="SubscriptionClient.SubscriptionIDs"></span>    SubscriptionIDs []<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="SubscriptionClient.Close">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L201">Close</a>
					<a class="permalink" href="#SubscriptionClient.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) Close() <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Close manages all the logic to unsubscribe to every subscription and close the connection
to the Hasura server correctly.

				
				
				
			
				
				<h3 id="SubscriptionClient.GetParams">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L119">GetParams</a>
					<a class="permalink" href="#SubscriptionClient.GetParams">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) GetParams() <a href="#HasuraParams">HasuraParams</a></pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.GetSubscriptionIDs">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L111">GetSubscriptionIDs</a>
					<a class="permalink" href="#SubscriptionClient.GetSubscriptionIDs">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) GetSubscriptionIDs() []<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a></pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.GetSubscriptions">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L103">GetSubscriptions</a>
					<a class="permalink" href="#SubscriptionClient.GetSubscriptions">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) GetSubscriptions() []<a href="#HasuraSubscription">HasuraSubscription</a></pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.Initialize">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L49">Initialize</a>
					<a class="permalink" href="#SubscriptionClient.Initialize">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) Initialize(useConfigDB <a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a>) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Initialize creates the client. This function is responsible from fetching the server
information from Heroku.

				
				
				
			
				
				<h3 id="SubscriptionClient.Run">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L190">Run</a>
					<a class="permalink" href="#SubscriptionClient.Run">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) Run(goroutineTracker *<a href="https:/docs.whist.com/backend/services/pkg/sync/">sync</a>.<a href="https:/docs.whist.com/backend/services/pkg/sync/#WaitGroup">WaitGroup</a>)</pre>
				<p>Run is responsible for starting the subscription client and adding it
to the routine tracker.

				
				
				
			
				
				<h3 id="SubscriptionClient.SetParams">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L123">SetParams</a>
					<a class="permalink" href="#SubscriptionClient.SetParams">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) SetParams(params <a href="#HasuraParams">HasuraParams</a>)</pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.SetSubscriptions">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L107">SetSubscriptions</a>
					<a class="permalink" href="#SubscriptionClient.SetSubscriptions">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) SetSubscriptions(subscriptions []<a href="#HasuraSubscription">HasuraSubscription</a>)</pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.SetSubscriptionsIDs">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L115">SetSubscriptionsIDs</a>
					<a class="permalink" href="#SubscriptionClient.SetSubscriptionsIDs">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) SetSubscriptionsIDs(ids []<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>)</pre>
				
				
				
				
			
				
				<h3 id="SubscriptionClient.Subscribe">func (*SubscriptionClient) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L129">Subscribe</a>
					<a class="permalink" href="#SubscriptionClient.Subscribe">&#xb6;</a>
					
					
				</h3>
				<pre>func (wc *<a href="#SubscriptionClient">SubscriptionClient</a>) Subscribe(query <a href="#GraphQLQuery">GraphQLQuery</a>, variables map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}, result <a href="#SubscriptionEvent">SubscriptionEvent</a>,
    conditionFn <a href="#Handlerfn">Handlerfn</a>, subscriptionEvents chan <a href="#SubscriptionEvent">SubscriptionEvent</a>) (id <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>, err <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>)</pre>
				<p>Subscribe creates the subscriptions according to the received queries and conditions.
It passes results through the received channel if the received `conditionFn` is true.

				
				
				
			
		
			
			
			<h2 id="SubscriptionEvent">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L171">SubscriptionEvent</a>
				<a class="permalink" href="#SubscriptionEvent">&#xb6;</a>
				
				
			</h2>
			<p>SubscriptionEvent represents any event received from Hasura
subscriptions. We define a custom (empty) interface to make the
main select on `host-service.go` cleaner.

			<pre>type SubscriptionEvent interface{}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistConfigs">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L81">WhistConfigs</a>
				<a class="permalink" href="#WhistConfigs">&#xb6;</a>
				
				
			</h2>
			<p>WhistClientAppVersions is the mapping of the `dev`, `staging` and `prod` tables on the config database.
This type interacts directly with the GraphQL client, and uses custom GraphQL types to marshal/unmarshal.
Only use for GraphQL operations.

			<pre>type WhistConfigs []struct {
    Key   <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;key&#34;`
    Value <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;value&#34;`
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistFrontendVersion">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L66">WhistFrontendVersion</a>
				<a class="permalink" href="#WhistFrontendVersion">&#xb6;</a>
				
				
			</h2>
			<p>WhistFrontendVersion is the mapping of the `desktop_app_version` table on the config database.
This type interacts directly with the GraphQL client, and uses custom GraphQL types to marshal/unmarshal.
Only use for GraphQL operations. For operations that do not interact with the client, use the
`ClientAppVersion` type instead.

			<pre>type WhistFrontendVersion struct {
<span id="WhistFrontendVersion.ID"></span>    ID                <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;id&#34;`
<span id="WhistFrontendVersion.Major"></span>    Major             <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;major&#34;`
<span id="WhistFrontendVersion.Minor"></span>    Minor             <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;minor&#34;`
<span id="WhistFrontendVersion.Micro"></span>    Micro             <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;micro&#34;`
<span id="WhistFrontendVersion.DevRC"></span>    DevRC             <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;dev_rc&#34;`
<span id="WhistFrontendVersion.StagingRC"></span>    StagingRC         <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>    `graphql:&#34;staging_rc&#34;`
<span id="WhistFrontendVersion.DevCommitHash"></span>    DevCommitHash     <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;dev_commit_hash&#34;`
<span id="WhistFrontendVersion.StagingCommitHash"></span>    StagingCommitHash <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;staging_commit_hash&#34;`
<span id="WhistFrontendVersion.ProdCommitHash"></span>    ProdCommitHash    <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;prod_commit_hash&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistGraphQLClient">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/graphql_client.go#L15">WhistGraphQLClient</a>
				<a class="permalink" href="#WhistGraphQLClient">&#xb6;</a>
				
				
			</h2>
			<p>WhistGraphQLClient is an interface used to abstract the interactions with
the official Hasura client.

			<pre>type WhistGraphQLClient interface {
    Initialize(<a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a>) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>
    Query(<a href="https:/docs.whist.com/backend/services/pkg/context/">context</a>.<a href="https:/docs.whist.com/backend/services/pkg/context/#Context">Context</a>, <a href="#GraphQLQuery">GraphQLQuery</a>, map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>
    Mutate(<a href="https:/docs.whist.com/backend/services/pkg/context/">context</a>.<a href="https:/docs.whist.com/backend/services/pkg/context/#Context">Context</a>, <a href="#GraphQLQuery">GraphQLQuery</a>, map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistImage">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L54">WhistImage</a>
				<a class="permalink" href="#WhistImage">&#xb6;</a>
				
				
			</h2>
			<p>WhistImage is the mapping of the `whist.images` table. This type interacts directly
with the GraphQL client, and uses custom GraphQL types to marshal/unmarshal. Only use for GraphQL
operations. For operations that do not interact with the client, use the `Image` type instead.

			<pre>type WhistImage struct {
<span id="WhistImage.Provider"></span>    Provider  <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;provider&#34;`
<span id="WhistImage.Region"></span>    Region    <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;region&#34;`
<span id="WhistImage.ImageID"></span>    ImageID   <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;image_id&#34;`
<span id="WhistImage.ClientSHA"></span>    ClientSHA <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;client_sha&#34;`
<span id="WhistImage.UpdatedAt"></span>    UpdatedAt <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>      `graphql:&#34;updated_at&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistInstance">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L22">WhistInstance</a>
				<a class="permalink" href="#WhistInstance">&#xb6;</a>
				
				
			</h2>
			<p>WhistInstance is the mapping of the `whist.hosts` table. This type interacts directly
with the GraphQL client, and uses custom GraphQL types to marshal/unmarshal. Only use for GraphQL
operations. For operations that do not interact with the client, use the `Instance` type instead.

			<pre>type WhistInstance struct {
<span id="WhistInstance.ID"></span>    ID                <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;id&#34;`
<span id="WhistInstance.Provider"></span>    Provider          <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;provider&#34;`
<span id="WhistInstance.Region"></span>    Region            <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;region&#34;`
<span id="WhistInstance.ImageID"></span>    ImageID           <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;image_id&#34;`
<span id="WhistInstance.ClientSHA"></span>    ClientSHA         <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;client_sha&#34;`
<span id="WhistInstance.IPAddress"></span>    IPAddress         <a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>           `graphql:&#34;ip_addr&#34;`
<span id="WhistInstance.Type"></span>    Type              <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;instance_type&#34;`
<span id="WhistInstance.RemainingCapacity"></span>    RemainingCapacity <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#Int">Int</a>      `graphql:&#34;remaining_capacity&#34;`
<span id="WhistInstance.Status"></span>    Status            <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a>   `graphql:&#34;status&#34;`
<span id="WhistInstance.CreatedAt"></span>    CreatedAt         <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>        `graphql:&#34;created_at&#34;`
<span id="WhistInstance.UpdatedAt"></span>    UpdatedAt         <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>        `graphql:&#34;updated_at&#34;`
<span id="WhistInstance.Mandelboxes"></span>    Mandelboxes       []<a href="#WhistMandelbox">WhistMandelbox</a> `graphql:&#34;mandelboxes&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistMandelbox">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/types.go#L40">WhistMandelbox</a>
				<a class="permalink" href="#WhistMandelbox">&#xb6;</a>
				
				
			</h2>
			<p>WhistMandelbox is the mapping of the `whist.mandelboxes` table. This type interacts directly
with the GraphQL client, and uses custom GraphQL types to marshal/unmarshal. Only use for GraphQL
operations. For operations that do not interact with the client, use the `Mandelbox` type instead.

			<pre>type WhistMandelbox struct {
<span id="WhistMandelbox.ID"></span>    ID         <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;id&#34;`
<span id="WhistMandelbox.App"></span>    App        <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;app&#34;`
<span id="WhistMandelbox.InstanceID"></span>    InstanceID <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;instance_id&#34;`
<span id="WhistMandelbox.UserID"></span>    UserID     <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;user_id&#34;`
<span id="WhistMandelbox.SessionID"></span>    SessionID  <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;session_id&#34;`
<span id="WhistMandelbox.Status"></span>    Status     <a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/">graphql</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/hasura/go-graphql-client/#String">String</a> `graphql:&#34;status&#34;`
<span id="WhistMandelbox.CreatedAt"></span>    CreatedAt  <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>      `graphql:&#34;created_at&#34;`
<span id="WhistMandelbox.UpdatedAt"></span>    UpdatedAt  <a href="https:/docs.whist.com/backend/services/pkg/time/">time</a>.<a href="https:/docs.whist.com/backend/services/pkg/time/#Time">Time</a>      `graphql:&#34;updated_at&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistSubscriptionClient">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/subscription_client.go#L25">WhistSubscriptionClient</a>
				<a class="permalink" href="#WhistSubscriptionClient">&#xb6;</a>
				
				
			</h2>
			<p>WhistSubscriptionClient is an interface used to abstract the interactions with
the official Hasura client.

			<pre>type WhistSubscriptionClient interface {
    Initialize(<a href="https:/docs.whist.com/backend/services/pkg/builtin/#bool">bool</a>) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>
    GetSubscriptions() []<a href="#HasuraSubscription">HasuraSubscription</a>
    SetSubscriptions([]<a href="#HasuraSubscription">HasuraSubscription</a>)
    GetSubscriptionIDs() []<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>
    SetSubscriptionsIDs([]<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>)
    GetParams() <a href="#HasuraParams">HasuraParams</a>
    SetParams(<a href="#HasuraParams">HasuraParams</a>)
    Subscribe(<a href="#GraphQLQuery">GraphQLQuery</a>, map[<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>]interface{}, <a href="#SubscriptionEvent">SubscriptionEvent</a>, <a href="#Handlerfn">Handlerfn</a>, chan <a href="#SubscriptionEvent">SubscriptionEvent</a>) (<a href="https:/docs.whist.com/backend/services/pkg/builtin/#string">string</a>, <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>)
    Run(*<a href="https:/docs.whist.com/backend/services/pkg/sync/">sync</a>.<a href="https:/docs.whist.com/backend/services/pkg/sync/#WaitGroup">WaitGroup</a>)
    Close() <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WhistWebsocketHandler">type <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go#L14">WhistWebsocketHandler</a>
				<a class="permalink" href="#WhistWebsocketHandler">&#xb6;</a>
				
				
			</h2>
			<p>WhistWebsocketHandler implements `graphql.WebsocketHandler` and uses
the `gorilla/websocket` library instead of the default used by Hasura.

			<pre>type WhistWebsocketHandler struct {
    *<a href="https:/docs.whist.com/backend/services/pkg/github.com/gorilla/websocket/">websocket</a>.<a href="https:/docs.whist.com/backend/services/pkg/github.com/gorilla/websocket/#Conn">Conn</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="WhistWebsocketHandler.Close">func (*WhistWebsocketHandler) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go#L33">Close</a>
					<a class="permalink" href="#WhistWebsocketHandler.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (wh *<a href="#WhistWebsocketHandler">WhistWebsocketHandler</a>) Close() <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>Close closes the underlying network connection without sending or waiting
for a close message.

				
				
				
			
				
				<h3 id="WhistWebsocketHandler.ReadJSON">func (*WhistWebsocketHandler) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go#L27">ReadJSON</a>
					<a class="permalink" href="#WhistWebsocketHandler.ReadJSON">&#xb6;</a>
					
					
				</h3>
				<pre>func (wh *<a href="#WhistWebsocketHandler">WhistWebsocketHandler</a>) ReadJSON(v interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>ReadJSON reads the next JSON-encoded message from the connection and stores
it in the value pointed to by v.

				
				
				
			
				
				<h3 id="WhistWebsocketHandler.WriteJSON">func (*WhistWebsocketHandler) <a href="https://github.com/whisthq/whist/blob/dev/backend/services/subscriptions/websocket.go#L21">WriteJSON</a>
					<a class="permalink" href="#WhistWebsocketHandler.WriteJSON">&#xb6;</a>
					
					
				</h3>
				<pre>func (wh *<a href="#WhistWebsocketHandler">WhistWebsocketHandler</a>) WriteJSON(v interface{}) <a href="https:/docs.whist.com/backend/services/pkg/builtin/#error">error</a></pre>
				<p>WriteJSON writes the JSON encoding of v as a message.

				
				
				
			
		
	

	







<div id="footer">
Build version go1.19.2.<br>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
