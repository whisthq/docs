
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>app package &#8212; Fractal Webserver  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="app.blueprints package" href="app.blueprints.html" />
    <link rel="prev" title="app" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="app-package">
<h1>app package<a class="headerlink" href="#app-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="app.blueprints.html">app.blueprints package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.blueprints.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="app.blueprints.admin.html">app.blueprints.admin package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.admin.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.admin.html#module-app.blueprints.admin.logs_blueprint">app.blueprints.admin.logs_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.admin.html#module-app.blueprints.admin">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.blueprints.aws.html">app.blueprints.aws package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.aws.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.aws.html#module-app.blueprints.aws.aws_container_blueprint">app.blueprints.aws.aws_container_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.aws.html#module-app.blueprints.aws">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.blueprints.celery.html">app.blueprints.celery package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.celery.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.celery.html#module-app.blueprints.celery.celery_status_blueprint">app.blueprints.celery.celery_status_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.celery.html#module-app.blueprints.celery">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.blueprints.host_service.html">app.blueprints.host_service package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.host_service.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.host_service.html#module-app.blueprints.host_service.host_service_blueprint">app.blueprints.host_service.host_service_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.host_service.html#module-app.blueprints.host_service">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.blueprints.mail.html">app.blueprints.mail package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.mail.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.mail.html#module-app.blueprints.mail.mail_blueprint">app.blueprints.mail.mail_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.mail.html#module-app.blueprints.mail.newsletter_blueprint">app.blueprints.mail.newsletter_blueprint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.blueprints.mail.html#module-app.blueprints.mail">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="app.blueprints.html#module-app.blueprints">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.celery.html">app.celery package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_celery_exceptions">app.celery.aws_celery_exceptions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_ecs_creation">app.celery.aws_ecs_creation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_ecs_deletion">app.celery.aws_ecs_deletion module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_ecs_modification">app.celery.aws_ecs_modification module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_s3_deletion">app.celery.aws_s3_deletion module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.aws_s3_modification">app.celery.aws_s3_modification module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery.dummy">app.celery.dummy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.celery.html#module-app.celery">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.constants.html">app.constants package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.bad_words_hashed">app.constants.bad_words_hashed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.config_table_names">app.constants.config_table_names module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.container_state_values">app.constants.container_state_values module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.ec2_userdata_template">app.constants.ec2_userdata_template module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.env_names">app.constants.env_names module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.generate_subsequences_for_words">app.constants.generate_subsequences_for_words module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#app-constants-hash-bad-words-module">app.constants.hash_bad_words module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.http_codes">app.constants.http_codes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants.regions">app.constants.regions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.constants.html#module-app.constants">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.helpers.html">app.helpers package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.helpers.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="app.helpers.blueprint_helpers.html">app.helpers.blueprint_helpers package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.blueprint_helpers.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.blueprint_helpers.html#module-app.helpers.blueprint_helpers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.helpers.helpers_tests.html">app.helpers.helpers_tests package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.helpers_tests.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.helpers_tests.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.helpers_tests.html#module-app.helpers.helpers_tests.conftest">app.helpers.helpers_tests.conftest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.helpers_tests.html#module-app.helpers.helpers_tests">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app.helpers.utils.html">app.helpers.utils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.utils.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="app.helpers.utils.html#module-app.helpers.utils">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="app.helpers.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.helpers.html#app-helpers-setup-module">app.helpers.setup module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.helpers.html#module-app.helpers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.models.html">app.models package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.models.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.models.html#module-app.models.hardware">app.models.hardware module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.models.html#module-app.models.sales">app.models.sales module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.models.html#module-app.models">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.serializers.html">app.serializers package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.serializers.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.serializers.html#module-app.serializers.hardware">app.serializers.hardware module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.serializers.html#module-app.serializers.sales">app.serializers.sales module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.serializers.html#module-app.serializers">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-app.celery_utils">
<span id="app-celery-utils-module"></span><h2>app.celery_utils module<a class="headerlink" href="#module-app.celery_utils" title="Permalink to this headline">¶</a></h2>
<p>Celery application configuration.</p>
<p>Celery application instances are configured by a large mapping of configuration keys to
values. Some of those key-value pairs may be set by passing certain arguments to the Celery
constructor. Others must be set directly on the configuration mapping.</p>
<p>In this file, CELERY_CONFIG is a dictionary that can be used to update the underlying Celery
application configuration mapping. celery_params takes a Flask application instance as input and
returns a dictionary containing keyword arguments to pass to the Celery constructor. make_celery
is a function that actually instantiates a Celery application that the Flask application can use
to delegate long-running tasks to asynchronous worker processes.</p>
<p>Structuring the file in this way allows for the Celery application to be configured for testing in
the same way that it is configured for deployment. See the descriptions of the celery_config and
celery_parameters test fixtures in the official Celery documentation and their implementations in
main-webserver/tests/conftest.py.</p>
<p><a class="reference external" href="https://docs.celeryproject.org/en/stable/userguide/testing.html#fixtures">https://docs.celeryproject.org/en/stable/userguide/testing.html#fixtures</a></p>
<dl class="py function">
<dt id="app.celery_utils.celery_params">
<code class="sig-prename descclassname"><span class="pre">app.celery_utils.</span></code><code class="sig-name descname"><span class="pre">celery_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flask_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.celery_utils.celery_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the parameters to use to instantiate a Flask application’s Celery instance.</p>
<p>The Flask application instance passed as the only argument to this function provides the Redis
connection string of the Redis instance to which the new Celery instance should connect and
the Flask application context with which each Celery task should be called.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flask_app</strong> – The instance of the Flask application with which the new Celery instance should
be compatible.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing the keyword arguments that should be passed to the Celery
constructor in order to instantiate a Celery application instance that is compatible with
the provided Flask application.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.celery_utils.make_celery">
<code class="sig-prename descclassname"><span class="pre">app.celery_utils.</span></code><code class="sig-name descname"><span class="pre">make_celery</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flask_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.celery_utils.make_celery" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the Celery application instance that accompanies the specified Flask application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flask_app</strong> – The Flask application instance whose tasks the new Celery instance should
process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Celery application instance.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-app.config">
<span id="app-config-module"></span><h2>app.config module<a class="headerlink" href="#module-app.config" title="Permalink to this headline">¶</a></h2>
<p>Flask application configuration.</p>
<p>This module contains definitions of objects that are used to configure the Flask application a la
<a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/config/#development-production">https://flask.palletsprojects.com/en/1.1.x/config/#development-production</a>. Depending on the
environment in which the Flask application is being deployed, one of these configuration objects is
selected to be used to configure the application. For example, if the application factory detects
that the application is being deployed during a local test session, LocalTestConfig will be
selected; if the application factory detects that the application is being deployed to production
on Heroku, the DeploymentConfig class will be selected. The configuration object is then
instantiated and the Flask application is configured by flask.Config.from_object().</p>
<dl class="py class">
<dt id="app.config.DeploymentConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">app.config.</span></code><code class="sig-name descname"><span class="pre">DeploymentConfig</span></code><a class="headerlink" href="#app.config.DeploymentConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Flask application configuration for deployed applications.</p>
<p>“Deployed applications” are those running on deployment platforms such as Heroku. They must be
started with CONFIG_DB_URL, DATABASE_URL, and REDIS_URL or REDIS_TLS_URL set in the process’s
execution environment.</p>
<dl class="py method">
<dt id="app.config.DeploymentConfig.APP_GIT_BRANCH">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">APP_GIT_BRANCH</span></code><a class="headerlink" href="#app.config.DeploymentConfig.APP_GIT_BRANCH" title="Permalink to this definition">¶</a></dt>
<dd><p>The git branch (i.e. sha) of the source code for this particular instance of the
application.</p>
<p>The current implementation assumes that Heroku is the execution environment. It should fail
if this is not the case (hence os.environ[] instead of os.environ.get()). It supports
standard heroku app environments as well as test environments.</p>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.APP_GIT_COMMIT">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">APP_GIT_COMMIT</span></code><a class="headerlink" href="#app.config.DeploymentConfig.APP_GIT_COMMIT" title="Permalink to this definition">¶</a></dt>
<dd><p>The git commit (i.e. sha) of the source code for this particular instance of the
application.</p>
<p>The current implementation assumes that Heroku is the execution environment. It should fail
if this is not the case (hence os.environ[] instead of os.environ.get()). It supports
standard heroku app environments as well as test environments.</p>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.AUTH0_DOMAIN">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">AUTH0_DOMAIN</span></code><a class="headerlink" href="#app.config.DeploymentConfig.AUTH0_DOMAIN" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.AUTH0_WEBSERVER_CLIENT_ID">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">AUTH0_WEBSERVER_CLIENT_ID</span></code><a class="headerlink" href="#app.config.DeploymentConfig.AUTH0_WEBSERVER_CLIENT_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.AUTH0_WEBSERVER_CLIENT_SECRET">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">AUTH0_WEBSERVER_CLIENT_SECRET</span></code><a class="headerlink" href="#app.config.DeploymentConfig.AUTH0_WEBSERVER_CLIENT_SECRET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.AWS_TASKS_PER_INSTANCE">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">AWS_TASKS_PER_INSTANCE</span></code><a class="headerlink" href="#app.config.DeploymentConfig.AWS_TASKS_PER_INSTANCE" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.ENDPOINT_SECRET">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ENDPOINT_SECRET</span></code><a class="headerlink" href="#app.config.DeploymentConfig.ENDPOINT_SECRET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.ENVIRONMENT">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ENVIRONMENT</span></code><a class="headerlink" href="#app.config.DeploymentConfig.ENVIRONMENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Which environment (production, staging, development, local) is the application
running in?</p>
<p>Many other values are derived off of this, such as which task_definitions to use.</p>
<p>NOTE: As a fallback, the “ENVIRONMENT” key can set to an environment name to
override the automatically calculated environment. If set, the value of ENVIRONMENT
will be returned as is.</p>
<p>NOTE: This assumes the app is running on Heroku. Local configs should override
this property. If a heroku environment is not being used, this method will fail
(unless ENVIRONMENT is set).</p>
<blockquote>
<div><ul class="simple">
<li><p>If Heroku is being used, but the app name is unrecognized, this will default to</p></li>
</ul>
<p>development since it’s assumed that a review app is being used (which is effectively a
development deployment).</p>
<ul class="simple">
<li><p>If Heroku is being used, and the app is in a test environment, then development</p></li>
</ul>
<p>will be returned as the environment.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>&#64;see app.constants.env_names</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.FRONTEND_URL">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">FRONTEND_URL</span></code><a class="headerlink" href="#app.config.DeploymentConfig.FRONTEND_URL" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.HIREFIRE_TOKEN">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">HIREFIRE_TOKEN</span></code><a class="headerlink" href="#app.config.DeploymentConfig.HIREFIRE_TOKEN" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.HOST_SERVER">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">HOST_SERVER</span></code><a class="headerlink" href="#app.config.DeploymentConfig.HOST_SERVER" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique identifier representing the server (ie. VM) that this instance of the
application is running on.</p>
<p>The current implementation assumes that Heroku is the execution environment. It should fail
if this is not the case (hence os.environ[] instead of os.environ.get()).</p>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.HOST_SERVICE_PORT">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">HOST_SERVICE_PORT</span></code><a class="headerlink" href="#app.config.DeploymentConfig.HOST_SERVICE_PORT" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.HOST_SERVICE_SECRET">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">HOST_SERVICE_SECRET</span></code><a class="headerlink" href="#app.config.DeploymentConfig.HOST_SERVICE_SECRET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.JWT_DECODE_ALGORITHMS">
<code class="sig-name descname"><span class="pre">JWT_DECODE_ALGORITHMS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">['RS256']</span></em><a class="headerlink" href="#app.config.DeploymentConfig.JWT_DECODE_ALGORITHMS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.JWT_DECODE_AUDIENCE">
<code class="sig-name descname"><span class="pre">JWT_DECODE_AUDIENCE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'https://api.fractal.co'</span></em><a class="headerlink" href="#app.config.DeploymentConfig.JWT_DECODE_AUDIENCE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.JWT_QUERY_STRING_NAME">
<code class="sig-name descname"><span class="pre">JWT_QUERY_STRING_NAME</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'access_token'</span></em><a class="headerlink" href="#app.config.DeploymentConfig.JWT_QUERY_STRING_NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.JWT_TOKEN_LOCATION">
<code class="sig-name descname"><span class="pre">JWT_TOKEN_LOCATION</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('headers',</span> <span class="pre">'query_string')</span></em><a class="headerlink" href="#app.config.DeploymentConfig.JWT_TOKEN_LOCATION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.METRICS_SINK_LOCAL_FILE">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">METRICS_SINK_LOCAL_FILE</span></code><a class="headerlink" href="#app.config.DeploymentConfig.METRICS_SINK_LOCAL_FILE" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.METRICS_SINK_LOGZ_TOKEN">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">METRICS_SINK_LOGZ_TOKEN</span></code><a class="headerlink" href="#app.config.DeploymentConfig.METRICS_SINK_LOGZ_TOKEN" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.REDIS_URL">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">REDIS_URL</span></code><a class="headerlink" href="#app.config.DeploymentConfig.REDIS_URL" title="Permalink to this definition">¶</a></dt>
<dd><p>Select the most secure Redis connection URI from the program’s environment.</p>
<p>Heroku dynos contain up to two environment variables containing Redis connection strings.
REDIS_URL should always be present, and REDIS_TLS_URL will sometimes be present as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Redis connection URI as a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.SECRET_KEY">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">SECRET_KEY</span></code><a class="headerlink" href="#app.config.DeploymentConfig.SECRET_KEY" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.SENDGRID_API_KEY">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">SENDGRID_API_KEY</span></code><a class="headerlink" href="#app.config.DeploymentConfig.SENDGRID_API_KEY" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.SENDGRID_DEFAULT_FROM">
<code class="sig-name descname"><span class="pre">SENDGRID_DEFAULT_FROM</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'noreply&#64;fractal.co'</span></em><a class="headerlink" href="#app.config.DeploymentConfig.SENDGRID_DEFAULT_FROM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.SENTRY_DSN">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">SENTRY_DSN</span></code><a class="headerlink" href="#app.config.DeploymentConfig.SENTRY_DSN" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.SILENCED_ENDPOINTS">
<code class="sig-name descname"><span class="pre">SILENCED_ENDPOINTS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('/status',</span> <span class="pre">'/ping')</span></em><a class="headerlink" href="#app.config.DeploymentConfig.SILENCED_ENDPOINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.SQLALCHEMY_DATABASE_URI">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">SQLALCHEMY_DATABASE_URI</span></code><a class="headerlink" href="#app.config.DeploymentConfig.SQLALCHEMY_DATABASE_URI" title="Permalink to this definition">¶</a></dt>
<dd><p>The connection string of the application’s main database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A PostgreSQL connection string whose scheme is guaranteed to be “postgresql”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.SQLALCHEMY_TRACK_MODIFICATIONS">
<code class="sig-name descname"><span class="pre">SQLALCHEMY_TRACK_MODIFICATIONS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#app.config.DeploymentConfig.SQLALCHEMY_TRACK_MODIFICATIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentConfig.STRIPE_CUSTOMER_ID_CLAIM">
<code class="sig-name descname"><span class="pre">STRIPE_CUSTOMER_ID_CLAIM</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'https://api.fractal.co/stripe_customer_id'</span></em><a class="headerlink" href="#app.config.DeploymentConfig.STRIPE_CUSTOMER_ID_CLAIM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.STRIPE_PRICE_ID">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">STRIPE_PRICE_ID</span></code><a class="headerlink" href="#app.config.DeploymentConfig.STRIPE_PRICE_ID" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.STRIPE_SECRET">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">STRIPE_SECRET</span></code><a class="headerlink" href="#app.config.DeploymentConfig.STRIPE_SECRET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.config_table">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">config_table</span></code><a class="headerlink" href="#app.config.DeploymentConfig.config_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine which config database table fallback configuration values should be read.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>&#64;see app.constants.config_table_names</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.DeploymentConfig.database_url">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">database_url</span></code><a class="headerlink" href="#app.config.DeploymentConfig.database_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="app.config.DeploymentTestConfig">
<code class="sig-prename descclassname"><span class="pre">app.config.</span></code><code class="sig-name descname"><span class="pre">DeploymentTestConfig</span></code><a class="headerlink" href="#app.config.DeploymentTestConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">app.config._TestConfig.&lt;locals&gt;.TestConfig</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="app.config.LocalConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">app.config.</span></code><code class="sig-name descname"><span class="pre">LocalConfig</span></code><a class="headerlink" href="#app.config.LocalConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#app.config.DeploymentConfig" title="app.config.DeploymentConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.config.DeploymentConfig</span></code></a></p>
<p>Application configuration for applications running on local development machines.</p>
<p>Applications running locally must set CONFIG_DB_URL and POSTGRES_PASSWORD either in the
process’s execution environment or in a .env file.</p>
<dl class="py method">
<dt id="app.config.LocalConfig.APP_GIT_BRANCH">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">APP_GIT_BRANCH</span></code><a class="headerlink" href="#app.config.LocalConfig.APP_GIT_BRANCH" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.LocalConfig.APP_GIT_COMMIT">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">APP_GIT_COMMIT</span></code><a class="headerlink" href="#app.config.LocalConfig.APP_GIT_COMMIT" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.LocalConfig.AWS_TASKS_PER_INSTANCE">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">AWS_TASKS_PER_INSTANCE</span></code><a class="headerlink" href="#app.config.LocalConfig.AWS_TASKS_PER_INSTANCE" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="app.config.LocalConfig.ENVIRONMENT">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ENVIRONMENT</span></code><a class="headerlink" href="#app.config.LocalConfig.ENVIRONMENT" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="app.config.LocalConfig.HOST_SERVER">
<code class="sig-name descname"><span class="pre">HOST_SERVER</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'local-unknown'</span></em><a class="headerlink" href="#app.config.LocalConfig.HOST_SERVER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.config.LocalConfig.SENTRY_DSN">
<code class="sig-name descname"><span class="pre">SENTRY_DSN</span></code><em class="property"> <span class="pre">=</span> <span class="pre">''</span></em><a class="headerlink" href="#app.config.LocalConfig.SENTRY_DSN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="app.config.LocalConfig.STRIPE_SECRET">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">STRIPE_SECRET</span></code><a class="headerlink" href="#app.config.LocalConfig.STRIPE_SECRET" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance attribute value.</p>
<p>This function is an instance method suitable to be passed as the first argument to the
built-in property() decorator. Were this method defined as instance methods are normally
defined, it would be clear that the config argument is actually the instance on which the
method is defined, i.e. self.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – The instance on which the method is defined. Passed automatically when this
function is called using instance.method() syntax.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Either a str or an int; the value of the configuration variable for which this function</dt><dd><p>has been generated to be a getter method.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>KeyError</strong> – The configuration key for which this function has been generated to be a
    getter method could be found neither in the process’s execution environment nor in
    the configuration database.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="app.config.LocalTestConfig">
<code class="sig-prename descclassname"><span class="pre">app.config.</span></code><code class="sig-name descname"><span class="pre">LocalTestConfig</span></code><a class="headerlink" href="#app.config.LocalTestConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">app.config._TestConfig.&lt;locals&gt;.TestConfig</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="app.config.getter">
<code class="sig-prename descclassname"><span class="pre">app.config.</span></code><code class="sig-name descname"><span class="pre">getter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fetch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.config.getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a getter function that can be passed to the builtin property decorator.</p>
<p>This function attempts to retrieve the value associated with a configuration variable key. It
first tries to retrieve the value of the environment variable whose name matches the key. If
no environment variable is set in the process’s execution environment it may attempt to fetch
the value associated with the specified key from Fractal’s configuration database. If the key
cannot be found, a default value is returned or a KeyError is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The key to retrieve.</p></li>
<li><p><strong>fetch</strong> – A boolean indicating whether or not to fetch this key from the configuration
database.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>default</strong> – An optional default value to return if the key is not found. Setting implies
raising=False.</p></li>
<li><p><strong>raising</strong> – A boolean indicating whether or not to raise a KeyError if a key cannot be
found.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A getter function that retrieves the value associated with the specified key from the
process’s execution environment, optionally falling back on the configuration database.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-app.exceptions">
<span id="app-exceptions-module"></span><h2>app.exceptions module<a class="headerlink" href="#module-app.exceptions" title="Permalink to this headline">¶</a></h2>
<p>A collection of exceptions that may be raised by the Flask application.</p>
<dl class="py exception">
<dt id="app.exceptions.ClusterNotFoundException">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">ClusterNotFoundException</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.exceptions.ClusterNotFoundException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">app.exceptions._FractalError</span></code></p>
<p>Raised by any method that fails to find a given cluster in the db
:param cluster_id: the ARN of the cluster
:type cluster_id: str</p>
<dl class="py attribute">
<dt id="app.exceptions.ClusterNotFoundException.message">
<code class="sig-name descname"><span class="pre">message</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'cluster_id:</span> <span class="pre">{cluster_id}'</span></em><a class="headerlink" href="#app.exceptions.ClusterNotFoundException.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.exceptions.ClusterNotFoundException.params">
<code class="sig-name descname"><span class="pre">params</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('cluster_id',)</span></em><a class="headerlink" href="#app.exceptions.ClusterNotFoundException.params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.ClusterNotIdle">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">ClusterNotIdle</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.exceptions.ClusterNotIdle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">app.exceptions._FractalError</span></code></p>
<p>Raised when a cluster may not be modified because it is busy.</p>
<p>A cluster may not be deleted while there are tasks still running on it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster</strong> – The name of the cluster that is not idle as a string.</p></li>
<li><p><strong>region</strong> – The name of the region in which the cluster is located as a string.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="app.exceptions.ClusterNotIdle.message">
<code class="sig-name descname"><span class="pre">message</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'Cluster</span> <span class="pre">{cluster}</span> <span class="pre">in</span> <span class="pre">{region}</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">idle'</span></em><a class="headerlink" href="#app.exceptions.ClusterNotIdle.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.exceptions.ClusterNotIdle.params">
<code class="sig-name descname"><span class="pre">params</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('cluster',</span> <span class="pre">'region')</span></em><a class="headerlink" href="#app.exceptions.ClusterNotIdle.params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.ContainerNotFoundException">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">ContainerNotFoundException</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.exceptions.ContainerNotFoundException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">app.exceptions._FractalError</span></code></p>
<p>Raised by any method that fails to find a given container in the db
:param container_id: the ARN of the container
:type container_id: str</p>
<dl class="py attribute">
<dt id="app.exceptions.ContainerNotFoundException.message">
<code class="sig-name descname"><span class="pre">message</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'container_id:</span> <span class="pre">{container_id}'</span></em><a class="headerlink" href="#app.exceptions.ContainerNotFoundException.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.exceptions.ContainerNotFoundException.params">
<code class="sig-name descname"><span class="pre">params</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('container_id',)</span></em><a class="headerlink" href="#app.exceptions.ContainerNotFoundException.params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.SendGridException">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">SendGridException</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.exceptions.SendGridException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">app.exceptions._FractalError</span></code></p>
<p>This exception is raised when SendGrid email sending API throws an exception
Args: None</p>
<dl class="py attribute">
<dt id="app.exceptions.SendGridException.message">
<code class="sig-name descname"><span class="pre">message</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'Sendgrid</span> <span class="pre">sending</span> <span class="pre">API</span> <span class="pre">threw</span> <span class="pre">an</span> <span class="pre">exception'</span></em><a class="headerlink" href="#app.exceptions.SendGridException.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.exceptions.SendGridException.params">
<code class="sig-name descname"><span class="pre">params</span></code><em class="property"> <span class="pre">=</span> <span class="pre">()</span></em><a class="headerlink" href="#app.exceptions.SendGridException.params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.SentryInitializationError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">SentryInitializationError</span></code><a class="headerlink" href="#app.exceptions.SentryInitializationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.StartValueException">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">StartValueException</span></code><a class="headerlink" href="#app.exceptions.StartValueException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when a container fails to send start values (DPI, etc.)</p>
</dd></dl>

<dl class="py exception">
<dt id="app.exceptions.TemplateNotFound">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">app.exceptions.</span></code><code class="sig-name descname"><span class="pre">TemplateNotFound</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.exceptions.TemplateNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">app.exceptions._FractalError</span></code></p>
<p>This exception is raised when an email template ID is requested that does not exist
:param email_template_id: id of the selected email template
:type email_template_id: str</p>
<dl class="py attribute">
<dt id="app.exceptions.TemplateNotFound.message">
<code class="sig-name descname"><span class="pre">message</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'Email_template_id:</span> <span class="pre">{email_template_id}'</span></em><a class="headerlink" href="#app.exceptions.TemplateNotFound.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="app.exceptions.TemplateNotFound.params">
<code class="sig-name descname"><span class="pre">params</span></code><em class="property"> <span class="pre">=</span> <span class="pre">('email_template_id',)</span></em><a class="headerlink" href="#app.exceptions.TemplateNotFound.params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-app.factory">
<span id="app-factory-module"></span><h2>app.factory module<a class="headerlink" href="#module-app.factory" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="app.factory.create_app">
<code class="sig-prename descclassname"><span class="pre">app.factory.</span></code><code class="sig-name descname"><span class="pre">create_app</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">testing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.factory.create_app" title="Permalink to this definition">¶</a></dt>
<dd><p>A Flask application factory.</p>
<p>See <a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/patterns/appfactories/?highlight=factory">https://flask.palletsprojects.com/en/1.1.x/patterns/appfactories/?highlight=factory</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>testing</strong> – A boolean indicating whether or not to configure the application for testing.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Flask application instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.factory.decode_key_callback">
<code class="sig-prename descclassname"><span class="pre">app.factory.</span></code><code class="sig-name descname"><span class="pre">decode_key_callback</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unverified_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_unverified_payload</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.factory.decode_key_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically determine the key to use to validate each JWT.</p>
<p>The AUTH0_DOMAIN Flask configuration variable MUST be set.</p>
<dl class="simple">
<dt>Inspiration:</dt><dd><p><a class="reference external" href="https://pyjwt.readthedocs.io/en/stable/usage.html#retrieve-rsa-signing-keys-from-a-jwks-endpoint">https://pyjwt.readthedocs.io/en/stable/usage.html#retrieve-rsa-signing-keys-from-a-jwks-endpoint</a></p>
</dd>
<dt>Specification:</dt><dd><p><a class="reference external" href="https://flask-jwt-extended.readthedocs.io/en/stable/api/#flask_jwt_extended.JWTManager.decode_key_loader">https://flask-jwt-extended.readthedocs.io/en/stable/api/#flask_jwt_extended.JWTManager.decode_key_loader</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.factory.register_blueprints">
<code class="sig-prename descclassname"><span class="pre">app.factory.</span></code><code class="sig-name descname"><span class="pre">register_blueprints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.factory.register_blueprints" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers all blueprints (endpoints) for the Flask app</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>app</strong> (<em>-</em>) – Flask object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.factory.register_handlers">
<code class="sig-prename descclassname"><span class="pre">app.factory.</span></code><code class="sig-name descname"><span class="pre">register_handlers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">flask.app.Flask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.factory.register_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Register all Flask app handlers. This should SHOULD NOT include endpoint definitions, which
happens via blueprints in <cite>register_blueprints</cite>. These handlers should be other functions
that need to be decorated by a Flask app (such as app.before_request(func)).</p>
</dd></dl>

</div>
<div class="section" id="module-app.flask_handlers">
<span id="app-flask-handlers-module"></span><h2>app.flask_handlers module<a class="headerlink" href="#module-app.flask_handlers" title="Permalink to this headline">¶</a></h2>
<p>Install handlers for the flask app. Specifically:
- can_process_requests_handler</p>
<dl class="py function">
<dt id="app.flask_handlers.can_process_requests">
<code class="sig-prename descclassname"><span class="pre">app.flask_handlers.</span></code><code class="sig-name descname"><span class="pre">can_process_requests</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#app.flask_handlers.can_process_requests" title="Permalink to this definition">¶</a></dt>
<dd><p>Get state of _WEB_REQUESTS_ENABLED in thread-safe manner.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if and only if _WEB_REQUESTS_ENABLED is True. False if _WEB_REQUESTS_ENABLED is False
or acquiring lock failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.flask_handlers.can_process_requests_handler">
<code class="sig-prename descclassname"><span class="pre">app.flask_handlers.</span></code><code class="sig-name descname"><span class="pre">can_process_requests_handler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">flask.app.Flask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.flask_handlers.can_process_requests_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a before_request handler to the Flask app <cite>app</cite>. Makes
sure web requests are enabled before processing them.</p>
</dd></dl>

<dl class="py function">
<dt id="app.flask_handlers.set_web_requests_status">
<code class="sig-prename descclassname"><span class="pre">app.flask_handlers.</span></code><code class="sig-name descname"><span class="pre">set_web_requests_status</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enabled</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#app.flask_handlers.set_web_requests_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Set state of _WEB_REQUESTS_ENABLED. If True, web requests allowed. If False, all are
rejected with WEBSERVER_MAINTENANCE status code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>enabled</strong> – Desired state of _WEB_REQUESTS_ENABLED.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if and only if _WEB_REQUESTS_ENABLED was properly set to the given parameter <cite>enabled</cite>.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-app.sentry">
<span id="app-sentry-module"></span><h2>app.sentry module<a class="headerlink" href="#module-app.sentry" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="app.sentry.init_and_ensure_sentry_connection">
<code class="sig-prename descclassname"><span class="pre">app.sentry.</span></code><code class="sig-name descname"><span class="pre">init_and_ensure_sentry_connection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sentry_dsn</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.sentry.init_and_ensure_sentry_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialized sentry with Flask and Celery integrations as well as the default
integrations. Also makes sure initialization succeeds. We do this by logging
a test message at the least serious level (debug). According to the docs and
manual experimentation, the return is None if and only if something went wrong. Otherwise,
the return is the ID of the message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – A valid value from app.constants.env_names</p></li>
<li><p><strong>sentry_dsn</strong> – Acquired from SENTRY_DSN env var. Points to external sentry resource.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Errors out if the client is not initialized correctly.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-app.signals">
<span id="app-signals-module"></span><h2>app.signals module<a class="headerlink" href="#module-app.signals" title="Permalink to this headline">¶</a></h2>
<p>This modules contains handlers for the following signals:
1. SIGTERM. Sent by Heroku before dyno restart. See
<a class="reference external" href="https://www.notion.so/tryfractal/Resolving-Heroku-Dyno-Restart-db63f4cbb9bd49a1a1fdab7aeb1f77e6">https://www.notion.so/tryfractal/Resolving-Heroku-Dyno-Restart-db63f4cbb9bd49a1a1fdab7aeb1f77e6</a>
for more details on when this happens and how we are solving it.</p>
<dl class="py class">
<dt id="app.signals.WebSignalHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">app.signals.</span></code><code class="sig-name descname"><span class="pre">WebSignalHandler</span></code><a class="headerlink" href="#app.signals.WebSignalHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles signals for the web dyno. Specifically:
- SIGTERM (<cite>handle_sigterm</cite>)</p>
<p>Initialize in webserver with:
&gt;&gt;&gt; WebSignalHandler() # signals are now handled</p>
<dl class="py method">
<dt id="app.signals.WebSignalHandler.handle_sigterm">
<code class="sig-name descname"><span class="pre">handle_sigterm</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.signals.WebSignalHandler.handle_sigterm" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles SIGTERM, which is sent by Heroku on various conditions outlined here:
<a class="reference external" href="https://www.notion.so/tryfractal/Resolving-Heroku-Dyno-Restart-db63f4cbb9bd49a1a1fdab7aeb1f77e6">https://www.notion.so/tryfractal/Resolving-Heroku-Dyno-Restart-db63f4cbb9bd49a1a1fdab7aeb1f77e6</a></p>
<p>SIGKILL follows 30 seconds from now, so this is our chance to clean-up resources cleanly.
Specifically, we do the following:
1. Flip a flag to stop incoming webserver requests, thereby making sure a webserver request
is not interrupted. We don’t kill webserver now because a web request might be ongoing.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="app.signals.celery_signal_handler">
<code class="sig-prename descclassname"><span class="pre">app.signals.</span></code><code class="sig-name descname"><span class="pre">celery_signal_handler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">how</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitcode</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.signals.celery_signal_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference external" href="https://docs.celeryproject.org/en/stable/userguide/signals.html#worker_shutting_down">https://docs.celeryproject.org/en/stable/userguide/signals.html#worker_shutting_down</a>.
Runs after a signal occurs and celery runs its default handlers. This signal handler
only works with the gevent pooling option. For unknown reasons, <cite>celery.worker.state</cite>
has no requests is empty if we use prefork. Our tests make sure this works, so
we can have confidence this won’t break silently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> – string indicating type of signal. Ex: SIGTERM, SIGINT</p></li>
<li><p><strong>how</strong> – “Warm” or “Cold”. SIGTERM and SIGINT have two layers of handlers. The first
occurrence starts a “Warm” shutdown that stops new tasks from being processed
but waits for existing ones to finish. The second occurence is a “Cold” shutdown
that just kills the worker.</p></li>
<li><p><strong>exitcode</strong> – integer return.</p></li>
<li><p><strong>kwargs</strong> – required by celery.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="app.signals.mark_tasks_as_revoked">
<code class="sig-prename descclassname"><span class="pre">app.signals.</span></code><code class="sig-name descname"><span class="pre">mark_tasks_as_revoked</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_ids</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#app.signals.mark_tasks_as_revoked" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark non-finished tasks in <cite>task_ids</cite> as REVOKED in backend. Ideally, we could call
<cite>app.control.revoke(task_ids)</cite> here, but because this runs after celery has
run its own SIGTERM handler (which stops the worker from picking up new tasks
and essentially takes it offline) the worker never sees the revoke command.
Even if it did, <a class="reference external" href="https://github.com/celery/celery/issues/4019">https://github.com/celery/celery/issues/4019</a> indicates that
revoking tasks with gevent is not possible. With some hacking we might be
able to solve this, but remember we have 30 seconds to clean up state. The
following races might happen:</p>
<ol class="arabic">
<li><ul class="simple">
<li><p>Task succeeds</p></li>
<li><p>This function runs and marks it as revoked despite success</p></li>
</ul>
<p>We handle this by checking to see if the task status is one of PENDING
or STARTED. Only in that case do we overwrite the result.</p>
</li>
<li><ul class="simple">
<li><p>This function runs and marks a task as revoked</p></li>
<li><p>Task succeeds and overrides the revoked status (in the 30 seconds it has)</p></li>
</ul>
<p>There is not much we can do about this without much more work. Also this is
an acceptable outcome because the task properly finished.</p>
</li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_ids</strong> – List of task ids to revoke</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-app">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-app" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="app.fractal_pre_process">
<code class="sig-prename descclassname"><span class="pre">app.</span></code><code class="sig-name descname"><span class="pre">fractal_pre_process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view_func</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_F</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">_F</span><a class="headerlink" href="#app.fractal_pre_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator bundling other decorators that should be set on all endpoints.</p>
<p>See:
- parse_request
- log_request</p>
</dd></dl>

<dl class="py function">
<dt id="app.log_request">
<code class="sig-prename descclassname"><span class="pre">app.</span></code><code class="sig-name descname"><span class="pre">log_request</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view_func</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_F</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">_F</span><a class="headerlink" href="#app.log_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Log information about the request, such as the method, URL, and body. This will no-op
if the logging level is set below INFO.</p>
</dd></dl>

<dl class="py function">
<dt id="app.parse_request">
<code class="sig-prename descclassname"><span class="pre">app.</span></code><code class="sig-name descname"><span class="pre">parse_request</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view_func</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_F</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">_F</span><a class="headerlink" href="#app.parse_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the incoming request and provide view_func with the following kwargs:
- body (if POST request, the JSON parsed data)
- recieved_from
- webserver_url</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Fractal Webserver</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Webserver Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="responsibilities.html">Webserver Responsibilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Other Services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="module_docs.html">Module Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="modules.html">app</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="module_docs.html">Module Documentation</a><ul>
  <li><a href="modules.html">app</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">app</a></li>
      <li>Next: <a href="app.blueprints.html" title="next chapter">app.blueprints package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Fractal Computers, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/app.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>